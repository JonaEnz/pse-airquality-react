(this["webpackJsonppse-airquality-react"]=this["webpackJsonppse-airquality-react"]||[]).push([[0],{101:function(e,t,n){},112:function(e,t,n){},113:function(e){e.exports=JSON.parse('{"a":[{"id":"de-de","name":"Deutsch","strings":{"SmartAQNet":" - Ihre Luftqualit\xe4tsapp","help":"Hilfe","about":"\xdcber","aboutText":"Das SmartAQNEet Projekt ist eine open-source Webanwendung auf Github, die von Informatikstudenten/-studentinnen der Karlsruher Institut der Technologie erstellt wurde. Ziel des Projektes ist es, die verschiedenen Messdaten zur Luftqualit\xe4t simpel, aussagekr\xe4ftig und benutzerfreundlich darzustellen.  Die Webanwendung basiert auf eine Umfrage mit 50 Teilnehmern zwischen dem Alter von 18 und 70, in der sie ihre Erwartungen an einer solchen Applikation genannt haben. Die Messdaten stammen von der Smart AirQuality Network Projekt in Ausburg.","privacyPolicy":"Datenschutzerkl\xe4rung","privacyPolicyText":"Die Webanwendung SmartAQNet speichert keine pers\xf6nlichen Daten. Wenn Sie der Applikation die Standortermittlung erlauben wird Ihr Standort erfasst, zwischengespeichert und nach dem Schlie\xdfen der Webapplikation wieder gel\xf6scht. Keine weitere Daten werden erfasst.","stationInfoButton":"Mehr Informationen","search":"Suche nach einem Ort","searchAlert":"Ort {term} konnte nicht gefunden werden.","loading":"Laden ...","noData":"Keine Daten","Error404":"Fehler 404: Die angeforderte Seite existiert nicht.","error":"Fehler","RelatedLink":"Mehr Infos","mockFeatureName":"Mock Feature","PNC2.5Desc":"Feinstaub mit Durchmesser kleiner als 2.5 \xb5m","PNC2.5Name":"Feinstaub (PM2.5)","PNC2.5Link":"https://www.umweltbundesamt.de/themen/luft/luftschadstoffe/feinstaub","PNC10Desc":"Feinstaub mit Durchmesser kleiner als 2.5 \xb5m","PNC10Name":"Feinstaub (PM10)","PNC10Link":"https://www.umweltbundesamt.de/themen/luft/luftschadstoffe/feinstaub","AirPressureName":"Luftdruck","pascalDef":"Luftdruck in Pascal","pascalLink":"https://de.wikipedia.org/wiki/Luftdruck","temperatureName":"Temperatur","temperatureDesc":"Umgebungstemperatur in \xb0C","tempLink":"https://de.wikipedia.org/wiki/Temperatur","mockFeatureNameId":"mockFeatureNameIdDe","mockFeatureDescriptionId":"mockFeatureDescriptionIdDe","mockWeblinkId":"mockWeblinkIdDe","last_measurement":"Letzte Messung","last_24_hours":"Letzte 24 Stunden","last_7_days":"Letzte 7 Tage","last_31_days":"Letzte 31 Tage","last_year":"Letztes Jahr","higher":"h\xf6herer Wert","lower":"niedrigerer Wert","map_configuration_title":"Kartenkonfiguration","testFeature":"Test","testNameDesc":"Test Beschreibung","testNameId":"Test Name","testWebLink":"https://testlink/","StationConfiguration":"Messstationen","NearConfiguration":"Vergleich mit Umfeld","PolygonConfiguration":"Fl\xe4chen","FeatureHistoryLineChart_Name":"Historische Werte","ComparisonToLastMonthPieChart_Name":"Vergleich letzter Monat","ComparisonToLastMonthPieChart_Title":"Wie viele Werte, die w\xe4hrend des letzten Monats gemessen wurden, waren h\xf6her/niedriger, als der aktuelle Wert?","instructions":"Anleitung zur Website","shortDescription":"Mit Hilfe dieser App kann man die Luftqualit\xe4t und die Temperatur anschauen, bei sich in der N\xe4he und \xfcberall wo sich unsere Sensoren befinden.","SearchTitle":"Beliebige Orte finden","Search":"Egal ob eine Stra\xdfe oder eine Stadt, es reicht den Namen in den Suchenfeld in der linken oberen Ecke einzutippen und Enter zu klicken.","locationTitle":"Zum aktuellen Standort springen","location":"Klickt man auf das Icon neben der Suche (Bild unten) und erlaubt man danach die Standortermittlung, springt die Karte direkt auf den aktuellen Standort.","FeatureMenuTitle":"Kartenkonfiguration","FeatureMenu":"In der Kartenkonfigurationsmen\xfc rechts unten kann man ausw\xe4hlen, ob man sich die Temperatur, Luftfeuchtigkeit, PM2.5 oder PM10 (beides Feinstaub) Messwerte anschauen will. Dabei kann man auch einstellen, ob die F\xe4rbung der Stationenpins an die gesetzlich festgelegten Grenzwert (Style = Messstationen) oder die Durchschnitt aller aktuellesten Messwerten (Style = Vergleich mit Umfeld) darstellen soll. Beim Auswahl von Style = Fl\xe4chen werden zwischen den Messstationen Dreicke ausgespannt. Wenn sie die Maus \xfcber ein Dreieck bewegen, sehen sie den Durchschnittswert der ausgespannten Fl\xe4che.","ValuesTitle":"Messwerte anzeigen","Values":"M\xf6chte man den aktuellsten Wert einer bestimmten Station sehen, muss man den farbigen Pin der ausgew\xe4hlten Station anklicken. Dann \xf6ffnet sich ein Pop-Up mit dem Wert. Klickt man auf Weitere Informationen, so werden weitere Werte und Statistiken angezeigt. Wenn man zur Karte zur\xfcckkehren m\xf6chte, ist das mit dem SmartAQNet-Button oben links m\xf6glich."}},{"id":"en-us","name":"English","strings":{"SmartAQNet":" - Your Air Quality Website","help":"Help","about":"About","aboutText":"The SmartAQNet project is an open-source Github web-application made by students of the Karlsruhe Institute of Technology. The goal of the project is to reflect many different types of measured data regarding air and air pollution in a simple, informative and user-friendly way. The web-application was based on a survey done with 50 people of ages 18 to 70, in which the participants shared their expectations for an application about air quality. The data has been provided by the Smart AirQuality Network project in Augsburg (www.smartaqnet.com).","privacyPolicy":"Privacy Policy","privacyPolicyText":"If you don\'t allow the application to have access to your address, SmartAQNet will not collect any data from you. Otherwise, your address will be cached until you close the application. No other personal data will be collected.","stationInfoButton":"More details","search":"Search for a location","searchAlert":"Couldn\'t find a place called {term}.","loading":"Loading ...","noData":"No data.","Error404":"Error 404: This page doesn\'t exist.","error":"Error","RelatedLink":"More information","mockFeatureName":"Mock Feature","PNC2.5Desc":"Particulate matter with diameter smaller than 2.5\xb5m","PNC2.5Name":"Particulate matter (PM2.5)","PNC2.5Link":"https://en.wikipedia.org/wiki/Particulates","PNC10Desc":"Particulate matter with diameter smaller than 10\xb5m","PNC10Name":"Particulate matter  (PM10)","PNC10Link":"https://en.wikipedia.org/wiki/Particulates","AirPressureName":"Air Pressure","pascalDef":"Air Pressure in pascal","pascalLink":"https://en.wikipedia.org/wiki/Atmospheric_pressure","temperatureName":"Temperature","temperatureDesc":"Temperature in \xb0C","tempLink":"https://en.wikipedia.org/wiki/Temperature","mockFeatureNameId":"mockFeatureNameIdEn","mockFeatureDescriptionId":"mockFeatureDescriptionIdEn","mockWeblinkId":"mockWeblinkIdEn","last_measurement":"Last Measurement","last_24_hours":"last 24 hours","last_7_days":"last 7 days","last_31_days":"last 31 days","last_year":"last year","higher":"higher value","lower":"lower value","map_configuration_title":"Map Configuration","testFeature":"Test","testNameDesc":"Test Beschreibung","testNameId":"Test Name","testWebLink":"Test Link","StationConfiguration":"Stations","NearConfiguration":"Compare to surroundings","PolygonConfiguration":"Area","FeatureHistoryLineChart_Name":"Historic Values","ComparisonToLastMonthPieChart_Name":"Comparison last month","ComparisonToLastMonthPieChart_Title":"How many values, measured during the last month, were higher/lower than the current value?","instructions":"Instructions to Website","shortDescription":"With this website, you can check the air quality and temperature around your house and wherever else our sensors are.","SearchTitle":"Find any place you want","Search":"You can find exact locations using the search bar in the upper left corner. Wether you want to find a house, a street or a city, just type the name is the search bar and click Enter.","locationTitle":"Find your current location","location":"If you don\'t want to type, your can just click the button right next to the search bar (illustrations below) and accept the websites request to access your location. Then the map will jump to your currnt location.","FeatureMenuTitle":"Map Configuration","FeatureMenu":"With the Map Configuration Menu in the lower right corner you can choose, which feature you want to display. You can also decide wether you want the color scale to show the measured values compared to an officially set limit (Style = Stations) or compared to the average of all latest measured values (Style = Compare to surroundings). In the Area Style, you will get triangle spanned between the station. Move your mouse above a triangle, so you can see the average value of the stations the triangle is spanned between.","ValuesTitle":"Measured values","Values":"If you click on the pin of a station, a pop-up with the measured value will show. By clicking on More information you will get more values and statistics. You can return to the map by clicking the SmartAQNet-Button in the upper-left corner."}}]}')},114:function(e){e.exports=JSON.parse('{"a":[{"id":"saqn:op:mcpm10","nameId":"PNC10Name","unitOfMeasurement":"\xb5g/m\xb3","descriptionId":"PNC10Desc","defaultScale":{"0":"#0f8a0f","5":"#2db00c","10":"#59d408","15":"#8fec04","20":"#c7f901","25":"#ffff00","30":"#f9c701","40":"#ec8f04","50":"#d45908","100":"#b02d0c","2147483647":"#8a0f0f"},"webLinkId":"PNC10Link","limit":100,"diagrams":["FeatureHistoryLineChart","ComparisonToLastMonthPieChart"],"icon":"smog"},{"id":"saqn:op:mcpm2p5","nameId":"PNC2.5Name","unitOfMeasurement":"\xb5g/m\xb3","descriptionId":"PNC2.5Desc","defaultScale":{"0":"#0f8a0f","5":"#2db00c","10":"#59d408","15":"#8fec04","20":"#c7f901","25":"#ffff00","30":"#f9c701","40":"#ec8f04","50":"#d45908","100":"#b02d0c","2147483647":"#8a0f0f"},"webLinkId":"PNC2.5Link","limit":100,"diagrams":["FeatureHistoryLineChart","ComparisonToLastMonthPieChart"],"icon":"smog"},{"id":"saqn:op:plev","nameId":"AirPressureName","unitOfMeasurement":"hPa","descriptionId":"pascalDef","defaultScale":{"970":"#0993f6","980":"#11eed1","990":"#16e963","1000":"#29e718","1010":"#80e619","1020":"#cfe718","1030":"#e9b816","1040":"#ee7811","1050":"#f63c09","2147483647":"#ff0000","-2147483647":"#0000ff"},"webLinkId":"pascalLink","limit":1050,"diagrams":["FeatureHistoryLineChart","ComparisonToLastMonthPieChart"],"icon":"tachometer-alt"},{"id":"saqn:op:ta","nameId":"temperatureName","unitOfMeasurement":"\xb0C","descriptionId":"temperatureDesc","defaultScale":{"0":"#0993f6","5":"#11eed1","10":"#16e963","15":"#29e718","20":"#80e619","25":"#cfe718","30":"#e9b816","35":"#ee7811","40":"#f63c09","2147483647":"#ff0000","-2147483647":"#0000ff"},"webLinkId":"tempLink","limit":40,"diagrams":["FeatureHistoryLineChart","ComparisonToLastMonthPieChart"],"icon":"thermometer-half"}]}')},146:function(e,t,n){e.exports=n(173)},151:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},168:function(e,t,n){var a={"./DetailPage":75,"./DetailPage.tsx":75,"./Diagram":79,"./Diagram.tsx":79,"./LocationMap":78,"./LocationMap.tsx":78,"./ObservationItem":77,"./ObservationItem.css":112,"./ObservationItem.tsx":77,"./ObservationStationProfile":76,"./ObservationStationProfile.tsx":76,"./marker_icon.svg":169};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=168},169:function(e,t,n){e.exports=n.p+"static/media/marker_icon.a06775c7.svg"},171:function(e,t,n){},172:function(e){e.exports=JSON.parse('{"language":"de-de","frostUrl":"https://api.smartaq.net/","supportedFeatures":["saqn:op:mcpm2p5","saqn:op:mcpm10","saqn:op:ta","saqn:op:plev"]}')},173:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n.n(i);n(151),n(152),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(133),u=n(229),c=n(132),l=n.n(c),h=n(131),g=n.n(h),f=n(8),d=n.n(f),p=n(14),m=n(4),v=n(5),b=n(11),y=n(10),k=(n(154),function(){function e(t,n){Object(m.a)(this,e),this.center=void 0,this.zoom=void 0,this.center=t,this.zoom=n,this.zoom<1&&(this.zoom=1)}return Object(v.a)(e,[{key:"getCenter",value:function(){return this.center}},{key:"getZoom",value:function(){return this.zoom}},{key:"getRadius",value:function(){return this.zoom}},{key:"setCenter",value:function(e){this.center=e}},{key:"setZoom",value:function(e){this.zoom=e,this.zoom<1&&(this.zoom=1)}}]),e}()),O=n(73),w=n(184),C=n(185),E=n(177),j=n(217),x=n(232),S=n(218),I=n(30),T=n(181),P=n(26),N=n(34),D=n(137),M=n(216),F=n(19),A=(n(155),n(21)),_=F.a.getInstance(),V=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={roadName:""},A.a.getAddress(a.props.lastObservation.getObservationStation().getPosition()).then((function(e){a.setState({roadName:e})})),a}return Object(v.a)(n,[{key:"openDetails",value:function(){window.location.href="/pse-airquality-react/detail/"+this.props.lastObservation.getObservationStation().getId()}},{key:"render",value:function(){var e=this,t=this.props.lastObservation.getObservationStation();return r.a.createElement(T.a,{className:"popup"},r.a.createElement(P.a,{container:!0,direction:"column"},r.a.createElement(N.a,{className:"title",variant:"h5",color:"textPrimary"},t.getName()),r.a.createElement(N.a,{className:"position",color:"textSecondary"},t.getPosition().getString()),r.a.createElement(N.a,{className:"position",color:"textSecondary"},this.state.roadName),r.a.createElement(D.a,{orientation:"horizontal"}),r.a.createElement(P.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(N.a,{className:"feature",variant:"subtitle1",color:"textSecondary"},this.props.lastObservation.getFeature().getName()+":"),r.a.createElement(N.a,{color:"primary"},r.a.createElement("a",{href:this.props.lastObservation.getFeature().getRelatedWeblink(),"data-testid":"featureWebLink"},"?"))),r.a.createElement(N.a,{className:"value",variant:"h4",display:"inline",color:"primary","data-testid":"value"},Math.floor(100*this.props.lastObservation.getValue())/100," ",this.props.lastObservation.getFeature().getUnitOfMeasurement()),r.a.createElement(M.a,{className:"info-button","data-testid":"info-button",color:"primary",onClick:function(){return e.openDetails()},variant:"contained"},_.getText("stationInfoButton"))))}}]),n}(r.a.Component);n(159);var R=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).nextViewport=void 0,a.lock=void 0,a.oldViewport=void 0,a.lock=!1,a.nextViewport=null,a.oldViewport=null,a.state={viewport:a.props.viewport,lastObservation:null},a}return Object(v.a)(n,[{key:"getIconFromMapPin",value:function(e){var t=L.IconMaterial.icon({icon:"",iconColor:"",markerColor:e.getColor().getHex(),outlineColor:"",outlineWidth:1}),n=/icon-(.+)-.*/;if(n.test(e.getId())){var a=n.exec(e.getId());t=L.IconMaterial.icon({icon:a[1],iconColor:"white",markerColor:e.getColor().getHex(),outlineColor:"black",outlineWidth:1})}return t}},{key:"onViewportChange",value:function(e){var t=this;this.nextViewport=e,this.lock||(this.oldViewport||(this.oldViewport=this.state.viewport),this.lock=!0,setTimeout((function(){var e,n,a=t.viewportLeafletToModel(t.nextViewport);t.lock=!1,t.oldViewport&&(a.getCenter().getDistance(null===(e=t.oldViewport)||void 0===e?void 0:e.getCenter())>.25||Math.abs(a.getZoom()-(null===(n=t.oldViewport)||void 0===n?void 0:n.getZoom()))>=1)&&t.updateViewport(a)}),500))}},{key:"updateViewport",value:function(e){this.props.onViewportChange(e),this.setState({viewport:e}),this.oldViewport=null}},{key:"viewportLeafletToModel",value:function(e){var t,n,a,r,i;return new k(new I.a(null!==(t=null===(n=e.center)||void 0===n?void 0:n[0])&&void 0!==t?t:0,null!==(a=null===(r=e.center)||void 0===r?void 0:r[1])&&void 0!==a?a:0),null!==(i=e.zoom)&&void 0!==i?i:5)}},{key:"handlePopup",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({lastObservation:null}),e.next=3,this.props.handlePopup(t);case 3:n=e.sent,this.setState({lastObservation:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPositionsFromPolygon",value:function(e){return e.getStations().map((function(e){return e.getPosition().getCoordinates()}))}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{center:this.state.viewport.getCenter().getCoordinates(),zoom:this.state.viewport.getZoom(),id:"leafletMap",onViewportChange:function(t){return e.onViewportChange(t)},zoomControl:!1,minZoom:5},r.a.createElement(C.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.pins.map((function(t){return r.a.createElement(E.a,{position:t.getPosition().getCoordinates(),icon:e.getIconFromMapPin(t),id:"mapPin-"+t.getId(),key:t.getId()},r.a.createElement(j.a,{onOpen:function(){return e.handlePopup(t)},className:"popup"},e.state.lastObservation?r.a.createElement(V,{lastObservation:e.state.lastObservation}):r.a.createElement(O.a,null)))})),this.props.polygons.map((function(t,n){var a,i;return r.a.createElement(x.a,{key:n,positions:e.getPositionsFromPolygon(t),color:t.getColor().getHex(),fillOpacity:.3},r.a.createElement(S.a,null,null!==(a=Math.floor(100*t.getAverageValue())/100+" "+(null===(i=t.getObservations()[0])||void 0===i?void 0:i.getFeature().getUnitOfMeasurement()))&&void 0!==a?a:""))})))}}]),n}(r.a.Component),H=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=void 0,this.position=void 0,this.value=void 0,this.color=void 0,this.id=t,this.position=n,this.value=a,this.color=r}return Object(v.a)(e,[{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}},{key:"getId",value:function(){return this.id}},{key:"getColor",value:function(){return this.color}}]),e}(),q=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,[{key:"buildMapPin",value:function(e,t){return new H(e.getId(),e.getPosition(),t,this.getScale().getColor(t))}}]),e}(),z=n(80),W=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.scale=void 0,a.selectedFeature=e,a.scale=a.selectedFeature.getRelatedScale(),a}return Object(v.a)(n,[{key:"getId",value:function(){return"NearConfiguration"}},{key:"buildMapPin",value:function(e,t){return new H(e.getId(),e.getPosition(),t,this.scale.getColor(t))}},{key:"buildNearScale",value:function(e){for(var t=Math.min.apply(Math,e.map((function(e){return e.getValue()}))),n=Math.max.apply(Math,e.map((function(e){return e.getValue()}))),a={},r=0;r<20;r++){var i=Math.floor(t+r/20*(n-t)),o=this.selectedFeature.getLimit()*(r/20);a[i]=this.selectedFeature.getRelatedScale().getColor(o).getHex()}return new z.a(!0,a)}},{key:"getPins",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getLatestObservations(t.getCenter(),t.getZoom(),this.selectedFeature);case 2:return n=e.sent.filter((function(e){return e.getValue()<5*r.selectedFeature.getLimit()})),this.scale=this.buildNearScale(n),a=[],n.forEach((function(e){a.push(r.buildMapPin(e.getObservationStation(),e.getValue()))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.scale}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(q),B=n(28),U=function(){function e(t,n){Object(m.a)(this,e),this.obs=void 0,this.color=void 0,this.obs=t,this.color=n}return Object(v.a)(e,[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}},{key:"getObservations",value:function(){return this.obs}},{key:"getStations",value:function(){return this.obs.map((function(e){return e.getObservationStation()}))}},{key:"getAverageValue",value:function(){return 0===this.obs.length?0:this.obs.reduce((function(e,t){return e+t.getValue()}),0)/this.obs.length}}]),e}(),$=n(119),G=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.selectedFeature=e,a}return Object(v.a)(n,[{key:"getId",value:function(){return"PolygonConfiguration"}},{key:"getPins",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getLatestObservations(t.getCenter(),t.getRadius(),this.selectedFeature);case 2:return n=e.sent,a=this.triangulate(n.filter((function(e){return e.getValue()<5*r.selectedFeature.getLimit()}))),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"triangulate",value:function(e){var t=[];e.forEach((function(e){return t.push([e.getObservationStation().getPosition().getLatitude(),e.getObservationStation().getPosition().getLongitude()])}));for(var n=[],a=$.a.from(t).triangles,r=0;r<a.length;r+=3){var i=[e[a[r]],e[a[r+1]],e[a[r+2]]],o=(e[a[r]].getValue()+e[a[r+1]].getValue()+e[a[r+2]].getValue())/3;n.push(new U(i,this.selectedFeature.getRelatedScale().getColor(o)))}return n}},{key:"getScale",value:function(){return this.selectedFeature.getRelatedScale()}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(q),K=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.selectedFeature=e,a}return Object(v.a)(n,[{key:"getId",value:function(){return"StationConfiguration"}}]),Object(v.a)(n,[{key:"getPins",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getLatestObservations(t.getCenter(),t.getZoom(),this.selectedFeature);case 2:return n=e.sent,e.abrupt("return",n.filter((function(e){return e.getValue()<5*a.selectedFeature.getLimit()})).map((function(e){return a.buildMapPin(e.getObservationStation(),e.getValue())})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.selectedFeature.getRelatedScale()}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(q),Z=n(90),Q=new K(B.a.getInstance().getFeature("saqn:op:ta")),J=new k(new I.a(49,8.4),7),Y=function(){function e(){Object(m.a)(this,e)}return Object(v.a)(e,null,[{key:"save",value:function(e,t){localStorage.setItem("mapconf",JSON.stringify({type:e.getId(),feature:e.getFeatures()[0].getId(),view:t}))}},{key:"load",value:function(){var e=localStorage.getItem("mapconf");if(e&&JSON.parse(e)){var t=JSON.parse(e),n=new k(new I.a(t.view.center.latitude,t.view.center.longitude),t.view.zoom),a=B.a.getInstance().getFeature(t.feature);if(Object(Z.isNullOrUndefined)(a))throw new Error("Feature "+t.feature+" is not supported.");if("NearConfiguration"===t.type)return[new W(a),n];if("PolygonConfiguration"===t.type)return[new G(a),n];if("StationConfiguration"===t.type)return[new K(a),n];throw new Error("Invalid configuration: "+t.type)}return[Q,J]}}]),e}(),X=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object(m.a)(this,e),this.config=void 0,this.viewport=void 0,this.DEFAULT_POSITION=new I.a(48.37,10.9),this.DEFAULT_ZOOM=5,t){var n=Y.load();this.config=n[0],this.viewport=n[1]}else this.viewport=new k(this.DEFAULT_POSITION,this.DEFAULT_ZOOM),this.config=new K(B.a.getInstance().getFeature("saqn:op:mcpm2p5"));if(0===this.config.getFeatures().length)throw Error("Invalid MapConfiguration")}return Object(v.a)(e,[{key:"handlePopup",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.getStation(t.getId());case 2:return n=e.sent,e.abrupt("return",A.a.getLatestObservation(n,this.config.getFeatures()[0]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){Y.save(this.config,this.viewport)}},{key:"getFeatureSelectConf",value:function(){var e=this.config.getFeatures()[0].getId();return{conf:this.config.getId(),feature:e}}},{key:"getViewport",value:function(){return this.viewport}},{key:"handleViewportChange",value:function(e){e.getZoom()<5&&(e=new k(e.getCenter(),5)),this.viewport=e,this.save()}},{key:"getPins",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.config.getPins(this.viewport));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.config.getPolygons(this.viewport));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.config.getScale()}},{key:"getSelectedFeature",value:function(){return this.config.getFeatures()[0]}},{key:"changeFeature",value:function(e){switch(this.config.getId()){case"StationConfiguration":this.config=new K(e);break;case"NearConfiguration":this.config=new W(e);break;case"PolygonConfiguration":this.config=new G(e);break;default:throw new Error("Current configuration has invalid id: "+this.config.getId())}}},{key:"onConfigurationChange",value:function(e){this.config=e,this.save()}},{key:"search",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(t));case 4:return n=e.sent,e.next=7,n.json();case 7:if(0!==(a=e.sent).length){e.next=10;break}return e.abrupt("return",Promise.reject());case 10:return this.updateCurrentPosition(new I.a(a[0].lat,a[0].lon)),e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentPosition",value:function(e){this.viewport.setCenter(e),this.save()}}]),e}(),ee=n(96),te=n(97),ne=n(220),ae=n(235),re=n(182),ie=n(178),oe=n(186),se=n(120),ue=n.n(se),ce=n(219),le=n(233),he=F.a.getInstance(),ge=Object(ce.a)((function(e){return Object(le.a)({root:{background:e.palette.primary.main,position:"relative"},title:{textAlign:"center",width:"100%",marginBottom:"10px"},popup:{padding:"20px",paddingBottom:"50px",marginBottom:"-40px"},formControl:{width:"100%",marginTop:"10px",marginBottom:"10px"}})}));function fe(e){var t,n=ge(),i=Object(a.useState)(!0),o=Object(ee.a)(i,2),s=o[0],u=o[1],c=Object(a.useState)(B.a.getInstance().listAllFeatures()[0]),l=Object(ee.a)(c,2),h=l[0],g=l[1],f=Object(a.useState)("StationConfiguration"),d=Object(ee.a)(f,2),p=d[0],m=d[1];Object(a.useEffect)((function(){e.startConf&&(g(B.a.getInstance().getFeature(e.startConf.feature)),m(e.startConf.conf))}),[e.startConf]);var v=function(t,n){switch(t){case"NearConfiguration":var a=new W(n);e.onConfigurationChange(a);break;case"PolygonConfiguration":var r=new G(n);e.onConfigurationChange(r);break;case"StationConfiguration":var i=new K(n);e.onConfigurationChange(i);break;default:return}m(t)};return r.a.createElement(a.Fragment,null,r.a.createElement(P.a,{container:!0,direction:"column",alignItems:"flex-end"},s?r.a.createElement(te.a,{className:n.popup,variant:"outlined"},r.a.createElement(P.a,{container:!0,direction:"column"},r.a.createElement(N.a,{id:"title",className:n.title,variant:"subtitle1",color:"textPrimary"},he.getText("map_configuration_title")),r.a.createElement(D.a,{orientation:"horizontal"}),r.a.createElement(ne.a,{className:n.formControl},r.a.createElement(ae.a,null,"Feature"),r.a.createElement(re.a,{id:"featureSelectForm",onChange:function(e){var t=B.a.getInstance().getFeature(e.target.value);g(t),t&&p&&v(p,t)},value:null!==(t=null===h||void 0===h?void 0:h.getId())&&void 0!==t?t:""},B.a.getInstance().listAllFeatures().map((function(e){return r.a.createElement(ie.a,{value:e.getId(),key:e.getId()},e.getName())})))),r.a.createElement(ne.a,{className:n.formControl},r.a.createElement(ae.a,null,"Style"),r.a.createElement(re.a,{id:"confSelectForm",onChange:function(e){h&&v(e.target.value,h)},value:null!==p&&void 0!==p?p:""},r.a.createElement(ie.a,{value:"PolygonConfiguration"},he.getText("PolygonConfiguration")),r.a.createElement(ie.a,{value:"StationConfiguration"},he.getText("StationConfiguration")),r.a.createElement(ie.a,{value:"NearConfiguration"},he.getText("NearConfiguration")))))):"",r.a.createElement(oe.a,{className:n.root,id:"avatarButton",onClick:function(e){u(!s)}},r.a.createElement(ue.a,null))))}var de=n(236),pe=n(222),me=n(121),ve=n.n(me),be=n(122),ye=n.n(be),ke=(n(163),F.a.getInstance()),Oe=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={searchTerm:"",locationEnabled:!0},"geolocation"in navigator&&navigator.permissions.query({name:"geolocation"}).then((function(e){"denied"===e.state&&a.setState({locationEnabled:!1})})),a}return Object(v.a)(n,[{key:"locationClick",value:function(){var e=this;"geolocation"in navigator?(console.log("Available"),navigator.geolocation.getCurrentPosition((function(t){var n=new I.a(t.coords.latitude,t.coords.longitude);e.props.updatePosition(n),e.setState({locationEnabled:!0})}),(function(t){console.log("Location denied."),e.setState({locationEnabled:!1})}))):(console.log("Not Available"),this.setState({locationEnabled:!1}))}},{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,r.a.createElement(te.a,{className:"root"},r.a.createElement("form",{className:"search-form",onSubmit:function(t){return e.props.onSearch(t,e.state.searchTerm)}},r.a.createElement(de.a,{className:"input-field","data-testid":"textBox",type:"search",onChange:function(t){e.setState({searchTerm:t.target.value})},placeholder:ke.getText("search")}),r.a.createElement(pe.a,{className:"search-button","data-testid":"searchButton",type:"submit",onClick:function(t){return e.props.onSearch(t,e.state.searchTerm)}},r.a.createElement(ve.a,null)),r.a.createElement(T.a,{className:"divider"}),r.a.createElement(pe.a,{className:"location-button","data-testid":"locationButton",onClick:function(){return e.locationClick()},disabled:!this.state.locationEnabled},r.a.createElement(ye.a,{"data-testid":"locationIcon"})))))}}]),n}(r.a.Component),we=Object(ce.a)((function(e){return Object(le.a)({container:{padding:e.spacing(1)}})}));function Ce(e,t,n){for(var a="linear-gradient(0deg,",r=0;r<10;r++)a=a+e.getColor(t+r/10*(n-t)).getHex()+" "+10*r+"%, ";return{background:a=a.slice(0,-2)+")",height:"100px",width:"30px"}}var Ee=function(e){var t=we();return r.a.createElement(te.a,{className:t.container},r.a.createElement(P.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(N.a,{variant:"body2"},Math.floor(10*e.max)/10),r.a.createElement(T.a,{"data-testid":"legend",style:Ce(e.scale,e.min,e.max)}),r.a.createElement(N.a,{variant:"body2"},Math.floor(10*e.min)/10),r.a.createElement(D.a,{orientation:"horizontal",flexItem:!0}),r.a.createElement(N.a,{variant:"body2"},"["+e.unit+"]")))},je=n(175),xe=n(38),Se=(n(164),function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).mapController=void 0,a.mapController=new X,a.state={selectedStation:null,viewport:a.mapController.getViewport(),pins:[],polygons:[],additionalPins:[]},a.update(),a}return Object(v.a)(n,[{key:"changePopupStation",value:function(e){this.setState({selectedStation:e})}},{key:"update",value:function(){var e=this,t=this.mapController.getPins(),n=this.mapController.getPolygons();Promise.all([t,n]).then((function(t){e.setState({pins:t[0],polygons:t[1]})}))}},{key:"getValueAt",value:function(e,t){var n=this.state.pins.sort((function(t,n){return t.getPosition().getDistance(e)-n.getPosition().getDistance(e)})),a=0,r=0;0!==n.length&&(a=n[0].getPosition().getDistance(e));for(var i=0,o=0;o<=2;o++)if(n.length>o){var s=a/n[o].getPosition().getDistance(e);r+=s,i+=n[o].getValue()*s}return i/(0===r?1:r)}},{key:"onViewportChange",value:function(e){this.mapController.handleViewportChange(e),this.setState({viewport:e}),this.update()}},{key:"onStationSelected",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.additionalPins.some((function(e){return t.getId()===e.getId()}))){e.next=2;break}return e.abrupt("return",new Promise((function(){return null})));case 2:return this.setState({selectedStation:null}),(n=this.mapController.handlePopup(t)).then((function(e){return a.changePopupStation(e.getObservationStation())})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(e,t){var n=this;e.preventDefault(),this.mapController.search(t).then((function(){n.setHomeMarker(),n.update()}),(function(){alert(F.a.getInstance().getText("searchAlert").replace("{term}",t))}))}},{key:"setHomeMarker",value:function(){var e=new H("icon-home-1",this.state.viewport.getCenter(),-1,new xe.a(0,0,0));this.setState({additionalPins:[e],pins:this.state.pins})}},{key:"getMin",value:function(){var e=Math.min.apply(Math,this.state.pins.map((function(e){return e.getValue()})));return isFinite(e)||(e=0),e}},{key:"getMax",value:function(){var e=Math.max.apply(Math,this.state.pins.map((function(e){return e.getValue()})));return isFinite(e)||(e=100),e}},{key:"render",value:function(){var e=this,t=this.getMin(),n=this.getMax();return r.a.createElement(T.a,{className:"map-page"},r.a.createElement(T.a,{className:"search"},r.a.createElement(Oe,{onSearch:function(t,n){return e.onSearch(t,n)},updatePosition:function(t){var n=e.state.viewport;n.setCenter(t),e.setHomeMarker(),e.onViewportChange(n)}})),r.a.createElement(T.a,{className:"map"},r.a.createElement(R,{viewport:this.state.viewport,onViewportChange:function(t){e.onViewportChange(t)},handlePopup:function(t){return e.onStationSelected(t)},pins:this.state.pins.concat(this.state.additionalPins),polygons:this.state.polygons})),r.a.createElement(T.a,{className:"feature-select"},r.a.createElement(fe,{onConfigurationChange:function(t){e.mapController.onConfigurationChange(t),e.update()},startConf:this.mapController.getFeatureSelectConf()})),r.a.createElement(T.a,{className:"legend"},r.a.createElement(Ee,{min:t,max:n,unit:this.mapController.getSelectedFeature().getUnitOfMeasurement(),scale:this.mapController.getScale()})))}}]),n}(r.a.Component)),Ie=Object(je.a)((function(e){return{}}))(Se),Te=n(75),Pe=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).code=void 0,a.message=void 0,a.code=a.props.code,a.message=a.props.message,a}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"informationPage"},r.a.createElement("h1",null,"Error"),r.a.createElement("h2",null,this.code),r.a.createElement("p",null,this.message))}}]),n}(r.a.Component),Le=(n(101),F.a.getInstance()),Ne=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"informationPage"},r.a.createElement("h1",null,Le.getText("about")),r.a.createElement("h3",null,Le.getText("aboutText"))))}}]),n}(r.a.Component),De=F.a.getInstance(),Me=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"informationPage"},r.a.createElement("h1",null,De.getText("privacyPolicy")),r.a.createElement("h3",null,De.getText("privacyPolicyText"))))}}]),n}(r.a.Component),Fe=n(47),Ae=n(225),_e=n(226),Ve=n(183),Re=n(230),He=n(221),qe=n(179),ze=n(227),We=n(228),Be=n(126),Ue=n.n(Be),$e=n(127),Ge=n.n($e),Ke=n(129),Ze=n.n(Ke),Qe=n(128),Je=n.n(Qe),Ye=n(130),Xe=n.n(Ye),et=n(135),tt=n(223),nt=n(224),at=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).availableLanguages=void 0,a.ref=void 0,a.language=void 0,a.language=e.language,a.state={selectedLang:a.language.getSelectedLanguage(),anchorEl:null},a.handleClick=a.handleClick.bind(Object(Fe.a)(a)),a.handleClose=a.handleClose.bind(Object(Fe.a)(a)),a.availableLanguages=a.language.getAvailableLanguages(),a}return Object(v.a)(n,[{key:"isSelectedLang",value:function(e){return!1}},{key:"handleClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"handleMenuItemClick",value:function(e,t){this.language.changeLanguage(t),window.location.reload(),this.setState({anchorEl:null,selectedLang:this.language.getSelectedLanguage()})}},{key:"langList",value:function(){var e=this,t=[];return this.availableLanguages.forEach((function(n,a){t.push(r.a.createElement(ie.a,{onClick:function(t){return e.handleMenuItemClick(t,a)},selected:a===e.language.getSelectedLanguageId()},n))})),t}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M.a,{onClick:this.handleClick,color:"inherit",startIcon:r.a.createElement(tt.a,null),endIcon:r.a.createElement(nt.a,null),"aria-controls":"simple-menu","aria-haspopup":"true"},r.a.createElement(Ve.a,{only:["xs","sm"]},this.state.selectedLang)),r.a.createElement(et.a,{open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,onClose:this.handleClose},this.langList()))}}]),n}(r.a.Component),rt=n(56),it=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).language=void 0,a.language=e.language,a.state={open:!1},a.toogleDrawer=a.toogleDrawer.bind(Object(Fe.a)(a)),a}return Object(v.a)(n,[{key:"toogleDrawer",value:function(){var e=!this.state.open;this.setState({open:e})}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(Ae.a,{position:"static",style:{height:"64px",boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2)",position:"relative",zIndex:20}},r.a.createElement(_e.a,null,r.a.createElement(N.a,{variant:"h6",component:rt.b,to:"/pse-airquality-react/",style:{textDecoration:"none",color:"unset"}},"SmartAQNet"),r.a.createElement(Ve.a,{smDown:!0},r.a.createElement(N.a,{variant:"h6",component:rt.b,to:"/pse-airquality-react/",style:{textDecoration:"none",fontStyle:"italic",color:"unset"}},this.language.getText("SmartAQNet"))),r.a.createElement(T.a,{style:{marginLeft:"auto"}}),r.a.createElement(M.a,{startIcon:r.a.createElement(Ue.a,null),component:rt.b,to:"/pse-airquality-react/howitWorks"},r.a.createElement(Ve.a,{only:["sm","xs"]},this.language.getText("help"))),r.a.createElement(T.a,{style:{marginLeft:"7px"}},r.a.createElement(at,{language:this.language})),r.a.createElement(pe.a,{style:{float:"right"},onClick:this.toogleDrawer},r.a.createElement(Ge.a,{htmlColor:"black"})))),r.a.createElement(Re.a,{anchor:"right",open:this.state.open,onOpen:this.toogleDrawer,onClose:this.toogleDrawer},r.a.createElement("div",{style:{width:250}},r.a.createElement(He.a,null,r.a.createElement(qe.a,{button:!0,onClick:this.toogleDrawer,component:rt.b,to:"/pse-airquality-react/privacy-policy"},r.a.createElement(ze.a,null,r.a.createElement(Je.a,null)),r.a.createElement(We.a,{primary:this.language.getText("privacyPolicy")})),r.a.createElement(qe.a,{button:!0,onClick:this.toogleDrawer,component:rt.b,to:"/pse-airquality-react/about"},r.a.createElement(ze.a,null,r.a.createElement(Ze.a,null)),r.a.createElement(We.a,{primary:this.language.getText("about")})),r.a.createElement(qe.a,{button:!0,onClick:this.toogleDrawer,component:"a",href:"https://www.smartaq.net"},r.a.createElement(ze.a,null,r.a.createElement(Xe.a,null)),r.a.createElement(We.a,{primary:"SmartAQnet"}))))))}}]),n}(r.a.Component),ot=F.a.getInstance(),st=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"informationPage"},r.a.createElement("h1",null,ot.getText("instructions")),r.a.createElement("h3",null,ot.getText("shortDescription"))),r.a.createElement("p",{className:"informationPage"},r.a.createElement("h2",null,r.a.createElement("u",null,ot.getText("SearchTitle"))),r.a.createElement("h3",null,ot.getText("Search"))),r.a.createElement("p",{className:"informationPage"},r.a.createElement("h2",null,r.a.createElement("u",null,ot.getText("locationTitle"))),r.a.createElement("h3",null,ot.getText("location"))),r.a.createElement("p",{className:"informationPage"},r.a.createElement("h2",null,r.a.createElement("u",null,ot.getText("FeatureMenuTitle"))),r.a.createElement("h3",null,ot.getText("FeatureMenu"))),r.a.createElement("p",{className:"informationPage"},r.a.createElement("h2",null,r.a.createElement("u",null,ot.getText("ValuesTitle"))),r.a.createElement("h3",null,ot.getText("Values"))))}}]),n}(r.a.Component),ut=n(22);n(171);var ct=function(){var e=F.a.getInstance();return r.a.createElement("div",{className:"app"},r.a.createElement(rt.a,null,r.a.createElement(it,{language:e}),r.a.createElement("div",{className:"page-content"},r.a.createElement(ut.c,null,r.a.createElement(ut.a,{exact:!0,path:"/pse-airquality-react/",component:Ie}),r.a.createElement(ut.a,{exact:!0,path:"/pse-airquality-react/detail/:id",component:Te.default}),r.a.createElement(ut.a,{exact:!0,path:"/pse-airquality-react/howItWorks",component:st}),r.a.createElement(ut.a,{exact:!0,path:"/pse-airquality-react/about",component:Ne}),r.a.createElement(ut.a,{exact:!0,path:"/pse-airquality-react/privacy-policy",component:Me}),r.a.createElement(ut.a,null,r.a.createElement(Pe,{code:404,message:F.a.getInstance().getText("Error404")}))))))},lt=function(){function e(){Object(m.a)(this,e),this.language="de-de",this.frostUrl=""}return Object(v.a)(e,[{key:"getLanguage",value:function(){return this.language}},{key:"getFrostUrl",value:function(){return this.frostUrl}}],[{key:"getInstance",value:function(){return e.instance||e.load(),e.instance}},{key:"load",value:function(){var t=n(172);if(console.log(t),Object(Z.isNullOrUndefined)(t))throw new Error("Config.json has wrong format.");var a=new e;a.language=t.language,a.frostUrl=t.frostUrl,t.supportedFeatures.forEach((function(e){return B.a.getInstance().getFeature(e)})),e.instance=a}}]),e}();lt.instance=void 0;var ht=Object(s.a)({palette:{primary:{main:g.a[500]},secondary:{main:l.a[500]}}});lt.getInstance(),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{theme:ht},r.a.createElement(ct,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),r=n(5),i=n(113),o=function(){function e(){Object(a.a)(this,e),this.selectedLangId=void 0,this.languages=void 0,this.selectedLang=void 0,this.selectedLangId="",this.languages=i.a,this.selectedLang=this.languages[0]}return Object(r.a)(e,[{key:"getText",value:function(e){var t=this.selectedLang.strings[e];if(""===t||null==t)throw new Error("There is no string with id: ".concat(e," in ").concat(this.selectedLang.name,"."));return t}},{key:"getSelectedLanguage",value:function(){return this.selectedLang.name}},{key:"getSelectedLanguageId",value:function(){return this.selectedLang.id}},{key:"changeLanguage",value:function(e){var t=this.languages.find((function(t){return t.id===e}));void 0!==t&&(this.selectedLang=t,this.selectedLangId=e,localStorage.setItem("language",this.selectedLangId))}},{key:"getAvailableLanguages",value:function(){var e=new Map;return this.languages.forEach((function(t){e.set(t.id,t.name)})),e}},{key:"getDateString",value:function(e){var t=this.getSelectedLanguageId();return e.toLocaleString(t)}}],[{key:"getInstance",value:function(){if(!e.languageInstance){e.languageInstance=new e;var t=localStorage.getItem("language");t&&e.languageInstance.changeLanguage(t)}return e.languageInstance}}]),e}();o.languageInstance=null},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var a=n(134),r=n(8),i=n.n(r),o=n(14),s=n(4),u=n(5),c=function(){function e(t,n,a){Object(s.a)(this,e),this.result=void 0,this.success=void 0,this.errorMessage=void 0,this.result=t,this.success=n,this.errorMessage=a}return Object(u.a)(e,[{key:"getResult",value:function(){return this.result}},{key:"getSuccess",value:function(){return this.success}},{key:"getMessage",value:function(){return this.errorMessage}}]),e}(),l=function(){function e(t){Object(s.a)(this,e),this.url=void 0,this.url=t}return Object(u.a)(e,[{key:"getUrl",value:function(){return this.url}},{key:"setUrl",value:function(e){this.url=e}},{key:"request",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,r,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getQueryBuilder().getQuery(n),e.next=3,fetch(this.url+a);case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",new c(null,!1,"Fetching Error: ".concat(r.status," ").concat(r.statusText)));case 6:return e.next=8,r.json();case 8:return o=e.sent,e.prev=9,s=t.getConverter(),u=s.convert(o,n),e.abrupt("return",new c(u,!0,"No error occured"));case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",new c(null,!1,e.t0.message));case 18:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),h=n(11),g=n(10),f=function(){function e(t,n){Object(s.a)(this,e),this.rmc=void 0,this.qb=void 0,this.rmc=t,this.qb=n}return Object(u.a)(e,[{key:"getConverter",value:function(){return this.rmc}},{key:"getQueryBuilder",value:function(){return this.qb}}]),e}(),d=n(69),p=function(){function e(t,n,a,r,i){Object(s.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.position=void 0,this.availableFeatures=void 0,this.id=t,this.name=n,this.description=a,this.position=r,this.availableFeatures=i}return Object(u.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return this.description}},{key:"getPosition",value:function(){return this.position}},{key:"getFeatures",value:function(){return this.availableFeatures}},{key:"getDiagramController",value:function(){var e,t=new Array,n=Object(d.a)(this.availableFeatures);try{for(n.s();!(e=n.n()).done;){var a,r=e.value.getDiagramController(this),i=Object(d.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.push(o)}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"hasFeature",value:function(e){return!!this.availableFeatures.find((function(t){return t.getId()===e.getId()}))}}]),e}(),m=n(30),v=n(28),b=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(s.a)(this,n),t.call(this,new y,new k)}return n}(f),y=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"convert",value:function(e,t){var n;if(void 0===e.Locations||null===e.Locations||void 0===e.Locations[0]||null===e.Locations[0])throw new Error("Thing has no Location");n=new m.a(e.Locations[0].location.coordinates[1],e.Locations[0].location.coordinates[0]);var a=[],r=v.a.getInstance();return e.Datastreams.forEach((function(e){var t=r.getFeature(e.ObservedProperty["@iot.id"]);if(void 0!==t){var n=t,i=!1;a.forEach((function(e){e.getId()===n.getId()&&(i=!0)})),!1===i&&a.push(t)}})),new p(e["@iot.id"],e.name,e.description,n,a)}}]),e}(),k=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"getQuery",value:function(e){return"Things('"+e.id+"')?$select=@iot.id,name,description&$expand=Locations($select=location),Datastreams/ObservedProperty($select=@iot.id)"}}]),e}(),O=n(49),w=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(s.a)(this,n),t.call(this,new C,new E)}return n}(f),C=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"convert",value:function(e,t){var n;try{n=e}catch(r){throw new Error("Convertion Error: Unknown json pattern")}var a=n.value[0].Observations[0];return new O.a(t.station,t.feature,a.result,new Date(a.phenomenonTime))}}]),e}(),E=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"getQuery",value:function(e){return"Datastreams?$select=@iot.id&$filter=Thing/@iot.id eq '"+e.station.getId()+"' and ObservedProperty/@iot.id eq '"+e.feature.getId()+"'&$expand=Observations($top=1;$orderby=phenomenonTime desc;$select=result,phenomenonTime)"}}]),e}(),j=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(s.a)(this,n),t.call(this,new x,new S)}return n}(f),x=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"convert",value:function(e,t){var n=[];if(null===e.value||void 0===e.value)throw new Error("Cannot parse response of server");return e.value.forEach((function(e){try{var a=e.Thing;if(null===a.Locations||void 0===a.Locations)return;if(null===a.Locations[0].location.coordinates||void 0===a.Locations[0].location.coordinates)return;var r=new m.a(a.Locations[0].location.coordinates[1],a.Locations[0].location.coordinates[0]),i=[];if(null===a.Datastreams||void 0===a.Datastreams)return;var o=v.a.getInstance();a.Datastreams.forEach((function(e){var t=o.getFeature(e.ObservedProperty["@iot.id"]);void 0!==t&&i.push(t)}));var s=new p(a["@iot.id"],a.name,a.description,r,i);if(null===e.Observations||void 0===e.Observations)return;if(null===e.Observations[0]||void 0===e.Observations[0])return;n.push(new O.a(s,t.feature,e.Observations[0].result,new Date(e.Observations[0].phenomenonTime)))}catch(u){}})),n}}]),e}(),S=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"getQuery",value:function(e){return"Datastreams?$select=@iot.id,name&$filter=geo.distance(Thing/Locations/location,geography'POINT("+e.center.getLongitude()+" "+e.center.getLatitude()+")') lt "+e.radius+" and overlaps(phenomenonTime,(now() sub duration'P1d')) and ObservedProperty/@iot.id eq '"+e.feature.getId()+"'&$expand=Thing($select=name,description,@iot.id;$expand=Locations($select=location),Datastreams($select=name)/ObservedProperty($select=@iot.id)),Observations($select=result,phenomenonTime;$filter=phenomenonTime gt now() sub duration'P1D';$orderby=phenomenonTime desc;$top=1)"}}]),e}(),I=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){return Object(s.a)(this,n),t.call(this,new T,new P)}return n}(f),T=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"convert",value:function(e,t){var n;try{n=e}catch(r){throw new Error("Convertion Error: unknown json template")}var a=[];return n.value.forEach((function(e){e.Observations.forEach((function(e){a.push(new O.a(t.station,t.feature,e.result,new Date(e.phenomenonTime)))}))})),a}}]),e}(),P=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"getQuery",value:function(e){return"Datastreams?$select=@iot.id&$filter=Thing/@iot.id eq '"+e.station.getId()+"' and ObservedProperty/@iot.id eq '"+e.feature.getId()+"'&$expand=Observations($filter=overlaps(phenomenonTime, "+e.start.toISOString()+"/"+e.end.toISOString()+");$orderby=phenomenonTime desc)"}}]),e}(),L=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"handleFrostResult",value:function(e){var t=e.getResult();if(e.getSuccess()&&null!==t)return t;throw new Error(e.getMessage())}},{key:"getLatestObservation",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.server.request(new w,{station:t,feature:n});case 2:return a=e.sent,e.abrupt("return",this.handleFrostResult(a));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStation",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new b,a={id:t},e.next=4,this.server.request(n,a);case 4:if((r=e.sent).getSuccess()){e.next=7;break}throw new Error(r.getMessage());case 7:return e.abrupt("return",this.handleFrostResult(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestObservations",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n,a){var r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new j,o={center:t,radius:n,feature:a},e.next=4,this.server.request(r,o);case 4:return s=e.sent,e.abrupt("return",this.handleFrostResult(s));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getObservations",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n,r,o){var s,u,c,l,h,g,f,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=new I,c=[],l=new Date(r.getTime()+216e5);do{c.push({station:t,feature:n,start:new Date(r.getTime()),end:new Date(l<o?l.getTime():o.getTime())}),r.setHours(r.getHours()+6),l.setHours(l.getHours()+6)}while(l<o);return h=[],c.forEach((function(e){h.push(d.server.request(u,e))})),e.next=8,Promise.all(h);case 8:return g=e.sent,f=g.map((function(e){return d.handleFrostResult(e)})),e.abrupt("return",(s=[]).concat.apply(s,Object(a.a)(f)));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getAddress",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nominatim.openstreetmap.org/reverse?lat={lat}&lon={lon}&format=json".replace("{lat}",t.getLatitude().toString()).replace("{lon}",t.getLongitude().toString()));case 2:return e.next=4,e.sent.json();case 4:if(r=e.sent,!(null===(n=r.address)||void 0===n?void 0:n.road)||!(null===(a=r.address)||void 0===a?void 0:a.city)){e.next=9;break}return e.abrupt("return",r.address.road+", "+r.address.city);case 9:return e.abrupt("return","?");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();L.server=new l("https://api.smartaq.net/v1.0/")},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a,r=n(4),i=n(5),o=n(8),s=n.n(o),u=n(14),c=n(66),l=n(19);!function(e){e.LINE_CHART="LineChart",e.PIE_CHART="PieChart"}(a||(a={}));var h=function(){function e(t){Object(r.a)(this,e),this.length=void 0,this.length=t}return Object(i.a)(e,[{key:"getEnd",value:function(e){return new Date(e.valueOf()+this.length)}},{key:"getStart",value:function(e){return new Date(e.valueOf()-this.length)}}]),e}(),g=n(21),f=n(49),d=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"reduceBlocks",value:function(e){var t=[];return e.forEach((function(e){if(0!==e.length){var n=e.map((function(e){return e.getValue()})).reduce((function(e,t){return e+t}),0)/e.length;t.push(new f.a(e[0].getObservationStation(),e[0].getFeature(),n,e[0].getTimeStamp()))}})),t}},{key:"GetDataForDay",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var r,i,o,u,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setMinutes(0),i=new Date(t.getTime()),o=new Date(t.getTime()),u=new Date(t.getTime()),i.setHours(0,0,0),o.setHours(8,0,0),u.setHours(16,0,0),r.push(g.a.getObservations(n,a,i,new Date(i.getTime()+9e5))),r.push(g.a.getObservations(n,a,o,new Date(o.getTime()+9e5))),r.push(g.a.getObservations(n,a,u,new Date(u.getTime()+9e5))),e.next=13,Promise.all(r);case 13:return c=e.sent,e.abrupt("return",this.reduceBlocks(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getDataByMonth",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((r=new Date(t.getTime())).setMonth(r.getMonth()-1),i=[];r<t;)i.push(this.GetDataForDay(r,n,a)),r.setDate(r.getDate()+1);return e.next=6,Promise.all(i);case 6:return o=e.sent,e.abrupt("return",o.reduce((function(e,t){return e.concat(t)}),[]));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getDataByYear",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],i=0;i<12;i++)t.setDate(1),r.push(this.GetDataForDay(t,n,a)),t.setDate(8),r.push(this.GetDataForDay(t,n,a)),t.setDate(15),r.push(this.GetDataForDay(t,n,a)),t.setDate(22),r.push(this.GetDataForDay(t,n,a)),t.setMonth(t.getMonth()-1);return e.next=4,Promise.all(r);case 4:return o=e.sent,e.abrupt("return",o.reduce((function(e,t){return e.concat(t)}),[]));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),p=l.a.getInstance(),m=function e(t,n,a,i){Object(r.a)(this,e),this.name=void 0,this.timespan=void 0,this.frequency=void 0,this.additionalGraphicsOptions=void 0,this.name=p.getText(t),this.timespan=n,this.frequency=a,this.additionalGraphicsOptions=i},v=function(){function e(t,n){Object(r.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.currentConfigurationOption=void 0,this.observationStation=t,this.feature=n,this.currentConfigurationOption=e.configurationOptions[0]}return Object(i.a)(e,[{key:"getID",value:function(){return e.ID}},{key:"getChartType",value:function(){return e.chartType}},{key:"getGraphicsOptions",value:function(){return Object(c.a)(Object(c.a)({},e.graphicsOptions),this.currentConfigurationOption.additionalGraphicsOptions)}},{key:"isConfigurable",value:function(){return e.isConfigutable}},{key:"setConfigurationOption",value:function(e){this.currentConfigurationOption=this.getFHLCConfigurationOption(e)}},{key:"getCurrentConfigurationOption",value:function(){return this.currentConfigurationOption.name}},{key:"getConfigurationOptions",value:function(){return e.configurationOptions.map((function(e){return e.name}))}},{key:"getData",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i,o,u,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.currentConfigurationOption.timespan.getStart(new Date(Date.now())),a=[],r=new Date(Date.now()),!((i=r.getTime()-n.getTime())>=12*(o=2592e6))){e.next=12;break}return e.next=9,d.getDataByYear(r,this.observationStation,this.feature);case 9:a=e.sent,e.next=21;break;case 12:if(!(i>=o)){e.next=18;break}return e.next=15,d.getDataByMonth(r,this.observationStation,this.feature);case 15:a=e.sent,e.next=21;break;case 18:return e.next=20,g.a.getObservations(this.observationStation,this.feature,n,r);case 20:a=e.sent;case 21:return u=[],a.forEach((function(e,t){var n=e.getTimeStamp(),a=e.getValue();u.push([n,a])})),u.sort((function(e,t){return e[0].valueOf()<t[0].valueOf()?-1:1})),(c=u).splice(0,0,["Date","Value"]),e.abrupt("return",c);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFHLCConfigurationOption",value:function(t){for(var n=e.configurationOptions,a=0;a<n.length;a++)if(n[a].name===t)return n[a];throw new Error("".concat(t," is an invalid configuration option for a diagram of type FeatureHistoryLineChart"))}}]),e}();v.ID="FeatureHistoryLineChart",v.chartType=a.LINE_CHART,v.isConfigutable=!0,v.configurationOptions=[new m("last_24_hours",new h(864e5),24,{hAxis:{format:"HH:mm",gridlines:{count:6}}}),new m("last_7_days",new h(6048e5),12,{hAxis:{format:"dd.MM",gridlines:{count:7}}}),new m("last_31_days",new h(26784e5),6,{hAxis:{format:"dd.MM",gridlines:{count:6}}}),new m("last_year",new h(31536e6),1,{hAxis:{format:"MMM",gridlines:{count:6}}})],v.graphicsOptions={legend:{position:"none"}};var b=l.a.getInstance(),y=function(){function e(t,n){Object(r.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.currentConfigurationOption=void 0,this.observationStation=t,this.feature=n,this.currentConfigurationOption=e.configurationOptions[0]}return Object(i.a)(e,[{key:"getID",value:function(){return e.ID}},{key:"setConfigurationOption",value:function(e){this.currentConfigurationOption=this.getCTLMPCConfigurationOption(e)}},{key:"getChartType",value:function(){return e.chartType}},{key:"getGraphicsOptions",value:function(){return Object(c.a)(Object(c.a)({},e.graphicsOptions),this.currentConfigurationOption.additionalGraphicOptions)}},{key:"isConfigurable",value:function(){return e.isConfigurable}},{key:"getConfigurationOptions",value:function(){return e.configurationOptions.map((function(e){return e.name}))}},{key:"getCurrentConfigurationOption",value:function(){return this.currentConfigurationOption.name}},{key:"getData",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,r,i,o,u,c,l,h,g,f,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.getCTLMPCConfigurationOption(t),r=a.timespan.getStart(new Date(Date.now())),i=[];case 3:if(!(r.valueOf()<Date.now())){e.next=12;break}return o=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,r.getHours()),e.next=7,d.GetDataForDay(o,this.observationStation,this.feature);case 7:u=e.sent,i=i.concat(u),r=o,e.next=3;break;case 12:return c=null===(n=i.pop())||void 0===n?void 0:n.getValue(),l=0,h=0,g=b.getText("higher"),f=b.getText("lower"),i.forEach((function(e){e.getValue()>c?l++:h++})),p=[["tag","#days"],[g,l],[f,h]],e.abrupt("return",p);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCTLMPCConfigurationOption",value:function(t){for(var n=e.configurationOptions,a=0;a<n.length;a++)if(n[a].name===t)return n[a];throw new Error("".concat(t," is an invalid configuration option for a diagram of type ComparisonToLastYearPieChart"))}}]),e}();y.title=b.getText("ComparisonToLastMonthPieChart_Title"),y.ID="ComparisonToLastMonthPieChart",y.chartType=a.PIE_CHART,y.isConfigurable=!1,y.graphicsOptions={legend:"none",pieSliceText:"label",title:y.title,pieStartAngle:100,slices:{0:{color:"#4caf50"},1:{color:"#f44336"}}},y.configurationOptions=[new function e(t,n,a,i){Object(r.a)(this,e),this.name=void 0,this.timespan=void 0,this.frequency=void 0,this.additionalGraphicOptions=void 0,this.name=t,this.timespan=n,this.frequency=a,this.additionalGraphicOptions=i}("default_configuration",new h(26784e5),24,{})];var k=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"getDiagramController",value:function(t,n,a){if(e.diagramMap.has(t))return e.diagramMap.get(t).call(e,n,a);throw new Error("Diagram id: ".concat(t,", is not supported"))}}]),e}();k.diagramMap=new Map([["FeatureHistoryLineChart",function(e,t){return new v(e,t)}],["ComparisonToLastMonthPieChart",function(e,t){return new y(e,t)}]]);var O=l.a.getInstance(),w=function(){function e(t,n,a,i,o,s,u,c,l){Object(r.a)(this,e),this.id=void 0,this.nameId=void 0,this.descriptionId=void 0,this.scale=void 0,this.relatedWeblinkId=void 0,this.limit=void 0,this.unitOfMeasurement=void 0,this.controllerIds=void 0,this.iconName=void 0,this.id=t,this.nameId=n,this.descriptionId=a,this.scale=i,this.relatedWeblinkId=o,this.limit=s,this.unitOfMeasurement=u,this.controllerIds=c,this.iconName=l}return Object(i.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return O.getText(this.nameId)}},{key:"getDescription",value:function(){return O.getText(this.descriptionId)}},{key:"getRelatedWeblink",value:function(){return O.getText(this.relatedWeblinkId)}},{key:"getRelatedScale",value:function(){return this.scale}},{key:"getDiagramController",value:function(e){var t=this,n=new Array;return this.controllerIds.forEach((function(a){var r=k.getDiagramController(a,e,t);n.push(r)})),n}},{key:"getLimit",value:function(){return this.limit}},{key:"getUnitOfMeasurement",value:function(){return this.unitOfMeasurement}},{key:"isLimitExceeded",value:function(e){return e.getValue()>this.limit}},{key:"getIconName",value:function(){return this.iconName}}]),e}(),C=n(80),E=n(114),j=function(){function e(){var t=this;Object(r.a)(this,e),this.features=void 0,this.features={},E.a.forEach((function(e){t.addFeature(e)}))}return Object(i.a)(e,[{key:"addFeature",value:function(e){if(e){var t=new w(e.id,e.nameId,e.descriptionId,new C.a(!0,e.defaultScale),e.webLinkId,e.limit,e.unitOfMeasurement,e.diagrams,e.icon);this.features[t.getId()]=t}}},{key:"listAllFeatures",value:function(){var e=this;return Object.keys(this.features).map((function(t){return e.features[t]}))}},{key:"getFeature",value:function(e){return Object.keys(this.features).includes(e)?this.features[e]:void 0}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();j.instance=null},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(4),r=n(5),i=function(){function e(t,n){if(Object(a.a)(this,e),this.latitude=void 0,this.longitude=void 0,Math.abs(t)>=90||Math.abs(n)>=180)throw new Error("Not valid coordinates: "+t+"\xb0N, "+n+"\xb0O");this.latitude=t,this.longitude=n}return Object(r.a)(e,[{key:"getDistance",value:function(e){return Math.sqrt(Math.pow(this.latitude-e.getLatitude(),2)+Math.pow(this.longitude-e.getLongitude(),2))}},{key:"getCoordinates",value:function(){return{lat:this.latitude,lng:this.longitude}}},{key:"getLatitude",value:function(){return this.latitude}},{key:"getLongitude",value:function(){return this.longitude}},{key:"getString",value:function(){return(Math.round(100*this.latitude)/100).toString()+" \xb0N "+Math.round(100*this.longitude)/100+" \xb0O"}}]),e}()},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(4),r=n(5),i=function(){function e(t,n,r){if(Object(a.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,t=Math.floor(t),n=Math.floor(n),r=Math.floor(r),t<0||t>255||n<0||n>255||r<0||r>255)throw new TypeError("r, g, b have to be an integer in [0, 255], are"+t+" "+n+" "+r);this.r=t,this.g=n,this.b=r}return Object(r.a)(e,[{key:"getRGB",value:function(){return{r:this.r,g:this.g,b:this.b}}},{key:"getHex",value:function(){return"#"+this.toHex(this.r)+this.toHex(this.g)+this.toHex(this.b)}},{key:"toHex",value:function(e){var t=e.toString(16).toUpperCase();return t.length<2&&(t="0"+t),t}}],[{key:"getColorFromHex",value:function(t){var n=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/g.exec(t);if(!n)throw new TypeError("hex has to be in format #RRGGBB");return new e(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16))}}]),e}()},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(4),r=n(5),i=function(){function e(t,n,r,i){Object(a.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.value=void 0,this.timestamp=void 0,this.observationStation=t,this.feature=n,this.value=r,this.timestamp=i}return Object(r.a)(e,[{key:"getObservationStation",value:function(){return this.observationStation}},{key:"getFeature",value:function(){return this.feature}},{key:"getValue",value:function(){return this.value}},{key:"getTimeStamp",value:function(){return this.timestamp}}]),e}()},75:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(4),r=n(5),i=n(11),o=n(10),s=n(0),u=n.n(s),c=n(73),l=n(26),h=n(183),g=n(76),f=n(78),d=n(79),p=n(21),m=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).styles={main_container:{paddingTop:"20px"}},r.state={obs:null},p.a.getStation(r.props.match.params.id).then((function(e){r.setState({obs:e})})),r}return Object(r.a)(n,[{key:"renderDiagrams",value:function(){return null===this.state.obs?u.a.createElement(c.a,null):this.state.obs.getDiagramController().map((function(e){return u.a.createElement(l.a,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12},u.a.createElement(d.default,{controller:e}))}))}},{key:"render",value:function(){return u.a.createElement(l.a,{container:!0,justify:"center"},u.a.createElement(l.a,{container:!0,justify:"center",spacing:4,xl:8,lg:8,md:8,sm:12,xs:12,style:this.styles.main_container},u.a.createElement(l.a,{item:!0,xl:8,lg:8,md:8,sm:12,xs:12},this.state.obs?u.a.createElement(g.default,{observationStation:this.state.obs}):u.a.createElement(c.a,null)),u.a.createElement(h.a,{only:["sm","xs"]},u.a.createElement(l.a,{item:!0,xl:4,lg:4,md:4},this.state.obs?u.a.createElement(f.default,{position:this.state.obs.getPosition()}):u.a.createElement(c.a,null))),this.renderDiagrams()))}}]),n}(u.a.Component)},76:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(8),r=n.n(a),i=n(69),o=n(14),s=n(4),u=n(5),c=n(11),l=n(10),h=n(0),g=n.n(h),f=n(26),d=n(97),p=n(180),m=n(34),v=n(137),b=n(77),y=n(38),k=n(19),O=n(21),w=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).languageProvider=void 0,a.styles={pos:{marginBottom:12},section_1:{padding:"20px"},section_2:{padding:"20px"},feature_container:{marginTop:"20px"}},a.colors=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],a.state={latestObservations:[],positionText:""},a.languageProvider=k.a.getInstance(),a.getLatestObservations().then((function(e){return a.setState({latestObservations:e})})),O.a.getAddress(a.props.observationStation.getPosition()).then((function(e){a.setState({positionText:e})})),a}return Object(u.a)(n,[{key:"getLatestObservations",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.observationStation.getFeatures(),n=new Array,a=Object(i.a)(t),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=13;break}return s=o.value,e.next=9,O.a.getLatestObservation(this.props.observationStation,s);case 9:u=e.sent,n.push(u);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this,[[3,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomColor",value:function(){var e=Math.round(Math.random()*(this.colors.length-1)),t=this.colors[e];return this.colors.splice(e,1),y.a.getColorFromHex(t)}},{key:"renderLatestObservations",value:function(){var e=this;return this.state.latestObservations.map((function(t){return g.a.createElement(f.a,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12},g.a.createElement(b.default,{color:e.getRandomColor(),observation:t}))}))}},{key:"renderObservationDate",value:function(){return 0!==this.state.latestObservations.length?this.languageProvider.getDateString(this.state.latestObservations[0].getTimeStamp()):""}},{key:"render",value:function(){return g.a.createElement(d.a,null,g.a.createElement(p.a,null,g.a.createElement("div",{style:this.styles.section_1},g.a.createElement(m.a,{align:"left",variant:"h4",component:"h2"},this.props.observationStation.getName()),g.a.createElement(m.a,{align:"left",color:"textSecondary",component:"p",style:this.styles.pos},this.props.observationStation.getPosition().getString()),g.a.createElement(m.a,{align:"left",color:"textSecondary",component:"p",style:this.styles.pos},this.state.positionText),g.a.createElement(m.a,{align:"left",variant:"body2",component:"p"},this.props.observationStation.getDescription())),g.a.createElement(v.a,{variant:"middle"}),g.a.createElement("div",{style:this.styles.section_2},g.a.createElement(f.a,{container:!0,alignItems:"stretch"},g.a.createElement(f.a,{item:!0,xs:!0},g.a.createElement(m.a,{align:"left",variant:"subtitle1"},this.languageProvider.getText("last_measurement"))),g.a.createElement(f.a,{item:!0},g.a.createElement(m.a,{color:"textSecondary",variant:"subtitle1"},this.renderObservationDate()))),g.a.createElement(f.a,{container:!0,style:this.styles.feature_container,spacing:2},this.renderLatestObservations()))))}}]),n}(g.a.Component)},77:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(4),r=n(5),i=n(11),o=n(10),s=n(0),u=n.n(s),c=n(97),l=n(181),h=n(26),g=n(186),f=n(34),d=n(123),p=n(72),m=n(95);n(112);p.b.add(m.c,m.a,m.b);var v=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(c.a,{className:"feature-card"},u.a.createElement(l.a,{className:"card-content"},u.a.createElement(h.a,{container:!0,direction:"row"},u.a.createElement(h.a,{container:!0,direction:"column",justify:"center",xl:2,lg:2,md:2,sm:2,xs:2},u.a.createElement(g.a,{style:{backgroundColor:this.props.color.getHex()}},u.a.createElement(d.a,{icon:this.props.observation.getFeature().getIconName()}))),u.a.createElement(h.a,{container:!0,direction:"column",xl:10,lg:10,md:10,sm:10,xs:10},u.a.createElement(f.a,{className:"centered-text",color:"textSecondary"},this.props.observation.getFeature().getName()),u.a.createElement(f.a,{className:"centered-text",variant:"subtitle1"},this.props.observation.getValue()+" "+this.props.observation.getFeature().getUnitOfMeasurement()),u.a.createElement(f.a,{className:"help",color:"primary"},u.a.createElement("a",{href:this.props.observation.getFeature().getRelatedWeblink(),"data-testid":"featureWebLink"},"?"))))))}}]),n}(u.a.Component)},78:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(4),r=n(5),i=n(11),o=n(10),s=n(0),u=n.n(s),c=n(97),l=n(184),h=n(185),g=n(177),f=(n(167),n(20)),d=n.n(f),p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).styles={map:{height:"300px"}},e}return Object(r.a)(n,[{key:"render",value:function(){var e=new d.a.LatLng(this.props.position.getLatitude(),this.props.position.getLongitude());return u.a.createElement(c.a,null,u.a.createElement(l.a,{center:e,zoom:n.ZOOM_LEVEL,style:this.styles.map,scrollWheelZoom:!1,dragging:!1,keyboard:!1,doubleClickZoom:!1},u.a.createElement(h.a,{url:n.TILE_SERVER,attribution:n.TILE_SERVER_ATTRIBUTION}),u.a.createElement(g.a,{position:e,icon:n.MARKER_ICON})))}}]),n}(u.a.Component);p.ZOOM_LEVEL=20,p.TILE_SERVER="https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",p.TILE_SERVER_ATTRIBUTION='&copy; <a href="https://www..org/copyright">OpenStreetMap</a>',p.MARKER_ICON_PATH="./marker_icon.svg",p.MARKER_ICON_SIZE=48,p.MARKER_ICON=new d.a.Icon({iconUrl:n(168)(""+p.MARKER_ICON_PATH),iconSize:[p.MARKER_ICON_SIZE,p.MARKER_ICON_SIZE],iconAnchor:[p.MARKER_ICON_SIZE/2,p.MARKER_ICON_SIZE]})},79:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var a=n(4),r=n(5),i=n(47),o=n(11),s=n(10),u=n(0),c=n.n(u),l=n(178),h=n(26),g=n(182),f=n(73),d=n(97),p=n(34),m=n(137),v=n(124),b=n(19),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).controller=void 0,r.styles={header:{padding:"10px",paddingLeft:"40px"},diagram:{width:"100%",height:"350px"}},r.controller=r.props.controller,r.state={data:null},r.handleConfigurationChange=r.handleConfigurationChange.bind(Object(i.a)(r)),r}return Object(r.a)(n,[{key:"handleConfigurationChange",value:function(e){var t=this,n=e.target.value;this.controller.setConfigurationOption(n),this.setState({data:null}),this.controller.getData(n).then((function(e){return t.setState({data:e})}))}},{key:"renderConfigurationOptions",value:function(){return this.controller.getConfigurationOptions().map((function(e){return c.a.createElement(l.a,{value:e},e)}))}},{key:"renderDiagramConfiguration",value:function(){return this.controller.isConfigurable()?c.a.createElement(h.a,{item:!0},c.a.createElement(g.a,{value:this.controller.getCurrentConfigurationOption(),onChange:this.handleConfigurationChange},this.renderConfigurationOptions())):""}},{key:"componentDidMount",value:function(){var e=this;this.controller.getData(this.controller.getCurrentConfigurationOption()).then((function(t){return e.setState({data:t})}))}},{key:"renderChart",value:function(){return null===this.state.data?c.a.createElement(h.a,{container:!0,justify:"center",alignContent:"center",style:this.styles.diagram},c.a.createElement(f.a,null)):c.a.createElement(v.a,{width:this.styles.diagram.width,height:this.styles.diagram.height,chartType:this.controller.getChartType(),options:this.controller.getGraphicsOptions(),loader:c.a.createElement(h.a,{container:!0,justify:"center",alignContent:"center",style:this.styles.diagram},c.a.createElement(f.a,null)),data:this.state.data})}},{key:"render",value:function(){return c.a.createElement(d.a,null,c.a.createElement("div",{style:this.styles.header},c.a.createElement(h.a,{container:!0,justify:"space-between",alignItems:"center"},c.a.createElement(h.a,{item:!0},c.a.createElement(p.a,{variant:"subtitle1"},b.a.getInstance().getText(this.controller.getID()+"_Name")+" - "+this.controller.feature.getName()+" ["+this.controller.feature.getUnitOfMeasurement()+"]")),this.renderDiagramConfiguration())),c.a.createElement(m.a,null),this.renderChart())}}]),n}(c.a.Component)},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),r=n(5),i=n(38),o=function(){function e(t,n){Object(a.a)(this,e),this.linearTransition=void 0,this.dict=void 0,this.linearTransition=t,this.dict=n,this.sortOnKeys()}return Object(r.a)(e,[{key:"getColor",value:function(e){var t=Object.keys(this.dict);if(0===t.length)return i.a.getColorFromHex("#AAAAAA");for(var n=0;n<t.length-1;n++)if(Number(t[n])<=e&&Number(t[n+1])>e)return this.linearTransition?this.getLinearTransition(n,e):i.a.getColorFromHex(this.dict[Number(t[n])]);return i.a.getColorFromHex(this.dict[Number(t[t.length-1])])}},{key:"sortOnKeys",value:function(){for(var e=Object.keys(this.dict),t=[],n=0;n<e.length;n++)t.push(Number(e[n]));t.sort();for(var a={},r=0;r<e.length;r++)a[t[r]]=this.dict[t[r]];this.dict=a}},{key:"getLinearTransition",value:function(e,t){var n=[Number(Object.keys(this.dict)[e]),""];n[1]=this.dict[n[0]];var a=[Number(Object.keys(this.dict)[e+1]),""];a[1]=this.dict[a[0]];var r=i.a.getColorFromHex(n[1]).getRGB(),o=i.a.getColorFromHex(a[1]).getRGB(),s=this.interpolate([n[0],r.r],[a[0],o.r],t),u=this.interpolate([n[0],r.g],[a[0],o.g],t),c=this.interpolate([n[0],r.b],[a[0],o.b],t);return new i.a(s,u,c)}},{key:"interpolate",value:function(e,t,n){var a=t[0]-e[0];return e[1]*((a-n+e[0])/a)+t[1]*((a-t[0]+n)/a)}}]),e}()}},[[146,1,2]]]);
//# sourceMappingURL=main.560166c0.chunk.js.map