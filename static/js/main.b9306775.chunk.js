(this["webpackJsonppse-airquality-react"]=this["webpackJsonppse-airquality-react"]||[]).push([[0],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=n(56),f=n(67),g=n(111),h=n(28),d=n(40),p=n(20),v=n(37),m=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).feature=void 0,a.feature=e,a}return Object(s.a)(n,[{key:"getPins",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[new f.a(t.getCenter().getString(),t.getCenter(),10,new h.a(255*Math.random(),255*Math.random(),255*Math.random()))]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestObservationMock",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new v.a(t,n,50*Math.random(),new Date(Date.now())));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPolygonColor",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getStations(),a=[],i=0;case 3:if(!(i<n.length)){e.next=11;break}return e.next=6,this.getLatestObservationMock(n[i],this.feature);case 6:o=e.sent,a.push(o.getValue());case 8:i++,e.next=3;break;case 11:return s=a.reduce((function(e,t){return e+t}),0)/a.length,e.abrupt("return",this.getScale().getColor(s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[new g.a([new d.a("1","1","",new p.a(49,8.4),[]),new d.a("1","1","",new p.a(49,8.5),[]),new d.a("1","1","",new p.a(50,8.45),[])],new h.a(0,0,0))]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.getFeatures()[0].getRelatedScale()}},{key:"getFeatures",value:function(){return[this.feature]}},{key:"setFeatures",value:function(e){0!==e.length&&(this.feature=e[0])}}]),n}(l.a)},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n){Object(a.a)(this,e),this.stations=void 0,this.color=void 0,this.stations=t,this.color=n}return Object(r.a)(e,[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}},{key:"getStations",value:function(){return this.stations}}]),e}()},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=n(56),f=n(52),g=n(67),h=n(47),d=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.scale=void 0,a.selectedFeature=e,a.scale=a.selectedFeature.getRelatedScale(),a}return Object(s.a)(n,[{key:"buildMapPin",value:function(e,t){return new g.a(e.getId(),e.getPosition(),t,this.scale.getColor(t))}},{key:"buildNearScale",value:function(e){for(var t=Math.min.apply(Math,e.map((function(e){return e.getValue()}))),n=Math.max.apply(Math,e.map((function(e){return e.getValue()}))),a={},r=0;r<20;r++){var i=Math.floor(t+r/20*(n-t)),o=this.selectedFeature.getLimit()*(r/20);a[i]=this.selectedFeature.getRelatedScale().getColor(o).getHex()}return new f.a(!0,a)}},{key:"getPins",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,i=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.getLatestObservations(t.getCenter(),t.getZoom(),this.selectedFeature);case 2:return n=e.sent,this.scale=this.buildNearScale(n),a=[],n.forEach((function(e){a.push(i.buildMapPin(e.getObservationStation(),e.getValue()))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.scale}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(l.a)},146:function(e,t,n){},147:function(e){e.exports=JSON.parse('{"id":"MockFeature","nameId":"mockFeatureName","unitOfMeasurement":"\xb0M","descriptionId":"mockDesc","defaultScale":{"0":"#AAAAAA","10":"#124379","100":"#217416"},"webLinkId":"link","limit":10,"diagrams":[]}')},148:function(e){e.exports=JSON.parse('{"id":"testFeatureId","nameId":"testFeatureName","unitOfMeasurement":"\xb0T","descriptionId":"testFeatureDesc","defaultScale":{"0":"","10":""},"webLinkId":"link","limit":10,"diagrams":[]}')},149:function(e){e.exports=JSON.parse('{"id":"saqn:op:mcpm2p5","nameId":"PNC2.5Name","unitOfMeasurement":"\xb5g/m\xb3","descriptionId":"PNC2.5Desc","defaultScale":{"0":"#0f8a0f","5":"#2db00c","10":"#59d408","15":"#8fec04","20":"#c7f901","25":"#ffff00","30":"#f9c701","40":"#ec8f04","50":"#d45908","100":"#b02d0c","2147483647":"#8a0f0f"},"webLinkId":"PNC2.5Link","limit":100,"diagrams":[]}')},150:function(e){e.exports=JSON.parse('{"id":"saqn:op:ncpm10","nameId":"PNC10Name","unitOfMeasurement":"\xb5g/m\xb3","descriptionId":"PNC10Desc","defaultScale":{"0":"#0f8a0f","5":"#2db00c","10":"#59d408","15":"#8fec04","20":"#c7f901","25":"#ffff00","30":"#f9c701","40":"#ec8f04","50":"#d45908","100":"#b02d0c","2147483647":"#8a0f0f"},"webLinkId":"PNC10Link","limit":100,"diagrams":[]}')},151:function(e){e.exports=JSON.parse('{"id":"saqn:op:plev","nameId":"AirPressureName","unitOfMeasurement":"hPa","descriptionId":"pascalDef","defaultScale":{"970":"#0993f6","980":"#11eed1","990":"#16e963","1000":"#29e718","1010":"#80e619","1020":"#cfe718","1030":"#e9b816","1040":"#ee7811","1050":"#f63c09","2147483647":"#ff0000","-2147483647":"#0000ff"},"webLinkId":"pascalLink","limit":1050,"diagrams":[]}')},152:function(e){e.exports=JSON.parse('{"id":"saqn:op:ta","nameId":"temperatureName","unitOfMeasurement":"\xb0C","descriptionId":"temperatureDesc","defaultScale":{"0":"#0993f6","5":"#11eed1","10":"#16e963","15":"#29e718","20":"#80e619","25":"#cfe718","30":"#e9b816","35":"#ee7811","40":"#f63c09","2147483647":"#ff0000","-2147483647":"#0000ff"},"webLinkId":"tempLink","limit":40,"diagrams":[]}')},156:function(e){e.exports=JSON.parse('{"a":[{"id":"de-de","name":"Deutsch","strings":{"about":"\xdcber","privacyPolicy":"Datenschutzerkl\xe4rung","stationInfoButton":"Mehr Informationen","search":"Suche","loading":"Laden ...","Error404":"Fehler 404: Die angeforderte Seite existiert nicht.","error":"Fehler","RelatedLink":"Mehr Infos","mockFeatureName":"Mock Feature","PNC2.5Desc":"Feinstaub mit Gr\xf6\xdfe von 2.5 \xb5m","PNC2.5Name":"Feinstaub (2.5\xb5m)","PNC2.5Link":"TODO","PNC10Desc":"\\"Feinstaub-Index\\" aus allen Partikelgr\xf6\xdfen","PNC10Name":"Feinstaub","PNC10Link":"TODO","AirPressureName":"Luftdruck","pascalDef":"Luftdruck in Pascal","pascalLink":"TODO","temperatureName":"Temperatur","temperatureDesc":"Umgebungstemperatur in \xb0C","tempLink":"TODO"}},{"id":"en-us","name":"English","strings":{"about":"About","privacyPolicy":"Privacy Policy","stationInfoButton":"More details","search":"Search","loading":"Loading ...","Error404":"Error 404: This page doesn\'t exist.","error":"Error","RelatedLink":"More information","mockFeatureName":"Mock Feature","PNC2.5Desc":"Particulate matter with diameter 2.5\xb5m","PNC2.5Name":"Particulate matter (2.5\xb5m)","PNC2.5Link":"TODO","PNC10Desc":"\'Particulate matter index\' from all sizes.","PNC10Name":"Particulate matter","PNC10Link":"TODO","AirPressureName":"Air Pressure","pascalDef":"Air Pressure in pascal","pascalLink":"TODO","temperatureName":"Temperature","temperatureDesc":"Temperature in \xb0C","tempLink":"TODO"}}]}')},195:function(e,t,n){e.exports=n(221)},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n){if(Object(a.a)(this,e),this.latitude=void 0,this.longitude=void 0,Math.abs(t)>=90||Math.abs(n)>=180)throw new Error("Not valid coordinates: "+t+"\xb0N, "+n+"\xb0O");this.latitude=t,this.longitude=n}return Object(r.a)(e,[{key:"getDistance",value:function(e){return Math.sqrt(Math.pow(this.latitude-e.getLatitude(),2)+Math.pow(this.longitude-e.getLongitude(),2))}},{key:"getCoordinates",value:function(){return{lat:this.latitude,lng:this.longitude}}},{key:"getLatitude",value:function(){return this.latitude}},{key:"getLongitude",value:function(){return this.longitude}},{key:"getString",value:function(){return(Math.round(100*this.latitude)/100).toString()+" \xb0N "+Math.round(100*this.longitude)/100+" \xb0O"}}]),e}()},200:function(e,t,n){},208:function(e,t,n){var a={"./MockFeature":147,"./MockFeature.json":147,"./TestFeature":148,"./TestFeature.json":148,"./saqnopmcpm2p5":149,"./saqnopmcpm2p5.json":149,"./saqnopncpm10":150,"./saqnopncpm10.json":150,"./saqnopplev":151,"./saqnopplev.json":151,"./saqnopta":152,"./saqnopta.json":152};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=208},218:function(e,t,n){var a={"./AboutPage":92,"./AboutPage.tsx":92,"./DetailPage":88,"./DetailPage.tsx":88,"./Diagrams/Diagram":93,"./Diagrams/Diagram.tsx":93,"./ErrorPage":94,"./ErrorPage.tsx":94,"./Layout":81,"./Layout.tsx":81,"./LayoutComponents/LanguageMenu":95,"./LayoutComponents/LanguageMenu.tsx":95,"./LayoutComponents/PageMenu":96,"./LayoutComponents/PageMenu.tsx":96,"./LocationMap":91,"./LocationMap.tsx":91,"./MapPage/FeatureInfo":84,"./MapPage/FeatureInfo.tsx":84,"./MapPage/FeatureSelect":85,"./MapPage/FeatureSelect.tsx":85,"./MapPage/Legend":87,"./MapPage/Legend.tsx":87,"./MapPage/Map":82,"./MapPage/Map.css":146,"./MapPage/Map.tsx":82,"./MapPage/MapPage":98,"./MapPage/MapPage.tsx":98,"./MapPage/Search":86,"./MapPage/Search.tsx":86,"./MapPage/StationInfo":83,"./MapPage/StationInfo.tsx":83,"./ObservationItem":90,"./ObservationItem.tsx":90,"./ObservationStationProfile":89,"./ObservationStationProfile.tsx":89,"./PrivacyPolicyPage":97,"./PrivacyPolicyPage.tsx":97,"./marker_icon.svg":220};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=218},220:function(e,t,n){e.exports=n.p+"static/media/marker_icon.5891ef15.svg"},221:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),o=n.n(i);n(200),n(201),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(176),u=n(267),c=n(175),l=n.n(c),f=n(174),g=n.n(f),h=n(81),d=Object(s.a)({palette:{primary:{main:g.a[500]},secondary:{main:l.a[500]}}});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{theme:d},r.a.createElement(h.default,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n,r){if(Object(a.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,t=Math.floor(t),n=Math.floor(n),r=Math.floor(r),t<0||t>255||n<0||n>255||r<0||r>255)throw new TypeError("r, g, b have to be an integer in [0, 255], are"+t+" "+n+" "+r);this.r=t,this.g=n,this.b=r}return Object(r.a)(e,[{key:"getRGB",value:function(){return{r:this.r,g:this.g,b:this.b}}},{key:"getHex",value:function(){return"#"+this.toHex(this.r)+this.toHex(this.g)+this.toHex(this.b)}},{key:"toHex",value:function(e){if(e<0||e>255)return this.toHex(0);var t=e.toString(16).toUpperCase();return t.length<2&&(t="0"+t),t}}],[{key:"getColorFromHex",value:function(t){var n=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/g.exec(t);if(!n)throw new TypeError("hex has to be in format #RRGGBB");return new e(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16))}}]),e}()},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=n(6),i=n(156),o=function(){function e(){Object(a.a)(this,e),this.selectedLangId=void 0,this.languages=void 0,this.selectedLang=void 0,this.selectedLangId="de-de",this.languages=i.a,this.selectedLang=this.languages[0]}return Object(r.a)(e,[{key:"getText",value:function(e){var t=this.selectedLang.strings[e];return""===t||null==t?(alert("There is no string with id: "+e+" in "+this.selectedLang.name+"."),"STRING MISSING"):t}},{key:"getSelectedLanguage",value:function(){return this.selectedLang.name}},{key:"getSelectedLanguageId",value:function(){return this.selectedLang.id}},{key:"changeLanguage",value:function(e){var t=this.languages.find((function(t){return t.id===e}));void 0!==t&&(this.selectedLang=t,this.selectedLangId=e,localStorage.setItem("language",this.selectedLangId))}},{key:"getAvailabeleLanguages",value:function(){var e=new Map;return this.languages.forEach((function(t){e.set(t.id,t.name)})),e}}],[{key:"getInstance",value:function(){if(!this.languageInstance){this.languageInstance=new e;var t=localStorage.getItem("language");t&&this.languageInstance.changeLanguage(t)}return this.languageInstance}}]),e}();o.languageInstance=void 0},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n,r,i){Object(a.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.value=void 0,this.timestamp=void 0,this.observationStation=t,this.feature=n,this.value=r,this.timestamp=i}return Object(r.a)(e,[{key:"getObservationStation",value:function(){return this.observationStation}},{key:"getFeature",value:function(){return this.feature}},{key:"getValue",value:function(){return this.value}},{key:"getTimeStamp",value:function(){return this.timestamp}}]),e}()},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n,r,i,o){Object(a.a)(this,e),this.id=void 0,this.name=void 0,this.description=void 0,this.position=void 0,this.availableFeatures=void 0,this.id=t,this.name=n,this.description=r,this.position=i,this.availableFeatures=o}return Object(r.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return this.description}},{key:"getPosition",value:function(){return this.position}},{key:"getFeatures",value:function(){return this.availableFeatures}},{key:"getDiagramController",value:function(){var e=this,t=[];return this.availableFeatures.forEach((function(n){n.getDiagramController(e).forEach((function(e){t.push(e)}))})),t}},{key:"hasFeature",value:function(e){for(var t=!1,n=this.availableFeatures.length,a=0;a<n;a++)e===this.availableFeatures[a]&&(t=!0);return t}}]),e}()},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),r=n(6),i=n(64),o=n(52),s=function(){function e(){Object(a.a)(this,e),this.context=void 0,this.features=void 0,this.features={},this.context=n(208)}return Object(r.a)(e,[{key:"addFeature",value:function(e){if(e){var t=new i.a(e.id,e.nameId,e.descriptionId,new o.a(!0,e.defaultScale),e.webLinkId,e.limit,e.unitOfMeasurement,e.diagrams,e.icon);this.features[t.getId()]=t}}},{key:"listAllFeatures",value:function(){var e=this;return Object.keys(this.features).map((function(t){return e.features[t]}))}},{key:"getFeature",value:function(e){if(Object.keys(this.features).includes(e))return this.features[e];var t=this.getFeatureById(e);return t?(this.features[e]=t,t):void 0}},{key:"getFeatureById",value:function(e){e=e.replace(/:/g,"");try{var t=this.context("./"+e+".json")}catch(a){return null}if(!t)return null;var n=t;return new i.a(n.id,n.nameId,n.descriptionId,new o.a(!0,n.defaultScale),n.webLinkId,n.limit,n.unitOfMeasurement,n.diagrams,n.icon)}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();s.instance=null},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(5),r=n(6),i=n(64),o=n(37),s=n(40),u=n(20),c=n(52),l=n(28),f=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"randomColor",value:function(){return new l.a(255*Math.random(),255*Math.random(),255*Math.random())}},{key:"mockFeature",value:function(){for(var e={},t=0;t<5;t++){var n=this.randomColor().getHex();e[Math.floor(100*Math.random())]=n}var a=new c.a(!0,e);return new i.a("MockFeature","nameId","descId",a,"weblink",100,"uoM",["YearComparisonLineChart","FeatureHistoryLineChart","ComparisonToLastYearPieChart"],"")}},{key:"mockStation",value:function(t){var n=Math.floor(1e4*Math.random()).toString(),a=new s.a(n,"mockName","mockDesc",new u.a(t.getLatitude()+6*Math.random()-3,t.getLongitude()+6*Math.random()-3),[]);return e.stations[a.getId()]=a,a}},{key:"mockObservations",value:function(e){for(var t=Math.floor(9*Math.random())+2,n=[],a=0;a<t;a++)n.push(new o.a(this.mockStation(e),this.mockFeature(),100*Math.random(),new Date(Date.now())));return n}},{key:"getLatestObservations",value:function(e,t,n){return this.mockObservations(e)}},{key:"getLatestObservation",value:function(e,t){return new o.a(e,t,100*Math.random(),new Date(Date.now()))}},{key:"getObservations",value:function(e,t,n,a,r){var i=t,s=new Array;if(r<=1)for(;i.valueOf()<n.valueOf();){i=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1/r);var u=100*Math.random(),c=new o.a(e,a,u,i);s.push(c)}else if(r>1)for(;i.valueOf()<n.valueOf();){i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours()+24/r);var l=100*Math.random(),f=new o.a(e,a,l,i);s.push(f)}return s}},{key:"getObservationStations",value:function(e,t){for(var n=[],a=0;a<7;a++)n.push(this.mockStation(e));return n}},{key:"getStation",value:function(e){return new s.a(e,"mockName","mockDesc",new u.a(0,0),[this.mockFeature(),this.mockFeature(),this.mockFeature()])}}]),e}();f.stations={}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(64),c=n(37),l=n(40),f=n(20),g=n(52),h=n(28),d=n(41),p=n(113),v=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"randomColor",value:function(){return new h.a(255*Math.random(),255*Math.random(),255*Math.random())}},{key:"mockFeature",value:function(){for(var e={},t=0;t<5;t++){var n=this.randomColor().getHex();e[Math.floor(100*Math.random())]=n}var a=new g.a(!0,e);return new u.a("MockFeature","nameId","descId",a,"weblink",100,"uoM",[],"icon")}},{key:"mockStation",value:function(t){var n=Math.floor(1e4*Math.random()).toString(),a=new l.a(n,"mockName","mockDesc",new f.a(t.getLatitude()+6*Math.random()-3,t.getLongitude()+6*Math.random()-3),[]);return e.stations[a.getId()]=a,a}},{key:"mockObservations",value:function(e){for(var t=Math.floor(9*Math.random())+2,n=[],a=0;a<t;a++)n.push(new c.a(this.mockStation(e),this.mockFeature(),100*Math.random(),new Date(Date.now())));return n}},{key:"calculatePollutionIndex",value:function(e){if(0===Object.keys(e).length)return 0;var t=Object.values(e),n=0;return t.forEach((function(e){return n+=parseFloat(e)})),Math.sqrt(n)/t.length}},{key:"getLatestObservations",value:function(){var t=Object(i.a)(r.a.mark((function t(n,a,i){var o,s,u,g,h=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(o="https://api.smartaq.net/v1.0/Datastreams?$select=@iot.id,name&$filter=geo.distance(Thing/Locations/location,geography'POINT({lon} {lat})') lt {radius} and overlaps(phenomenonTime,(now() sub duration'P1d')) and ObservedProperty/@iot.id eq '{featureId}'&$expand=Thing($select=name,@iot.id;$expand=Locations($select=location),Datastreams($select=name)/ObservedProperty($select=@iot.id)),Observations($select=result,phenomenonTime;$filter=phenomenonTime gt now() sub duration'P1D';$orderby=phenomenonTime desc;$top=1)").replace(/{lon}/g,n.getLongitude().toString()).replace(/{lat}/g,n.getLatitude().toString()).replace(/{radius}/g,a.toString()).replace(/{featureId}/g,i.getId()),t.next=4,fetch(o);case 4:return t.next=6,t.sent.json();case 6:return s=t.sent,u=s.value,g=[],u.forEach((function(t){if(0!==t.Observations.length){var n,a=t.Thing.Datastreams.flatMap((function(e){var t=d.a.getInstance().getFeature(e.ObservedProperty["@iot.id"]);return null!==t&&void 0!==t?t:[]}));"saqn:op:ncpm10"===i.getId()&&(t.Observations[0].result=h.calculatePollutionIndex(t.Observations[0].result));var r=new c.a(new l.a(t.Thing["@iot.id"],t.Thing.name,t.Thing["@iot.id"]+"_desc",new f.a(t.Thing.Locations[0].location.coordinates[1],t.Thing.Locations[0].location.coordinates[0]),a),i,null!==(n=t.Observations[0].result)&&void 0!==n?n:-1,new Date(t.Observations[0].phenomenonTime));g.push(r),e.stations[r.getObservationStation().getId()]=r.getObservationStation()}})),t.abrupt("return",g);case 11:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"getLatestObservation",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("MockFeature"!==n.getId()){e.next=2;break}return e.abrupt("return",this.mockObservations(t.getPosition())[0]);case 2:return a=(a="https://api.smartaq.net/v1.0/Datastreams?$select=@iot.id&$filter=Thing/@iot.id eq '{stationId}' and ObservedProperty/@iot.id eq '{featureId}'&$expand=Observations($top=1;$orderby=phenomenonTime desc;$select=result,phenomenonTime)").replace(/{featureId}/g,n.getId()).replace(/{stationId}/g,t.getId()),e.next=6,fetch(a);case 6:return e.next=8,e.sent.json();case 8:if((i=e.sent.value)&&0!==i.length){e.next=11;break}return e.abrupt("return",new c.a(t,n,-1,new Date(Date.now())));case 11:return"saqn:op:ncpm10"===n.getId()&&(i[0].Observations[0].result=this.calculatePollutionIndex(i[0].Observations[0].result)),e.abrupt("return",new c.a(t,n,i[0].Observations[0].result,new Date(i[0].Observations[0].phenomenonTime)));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getObservations",value:function(e,t,n,a,r){throw new Error("Not implemented")}},{key:"getObservationStations",value:function(){var t=Object(i.a)(r.a.mark((function t(n,a){var i,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="https://api.smartaq.net/v1.0/Things?$filter=geo.distance(Locations/location,geography'POINT({lon} {lat})') lt {radius} and overlaps(Datastreams/phenomenonTime,(now() sub duration'P1d'))&$expand=Locations($select=location),Datastreams($select=name)/ObservedProperty($select=@iot.id)",console.log(i.replace(/{lon}/g,n.getLongitude().toString()).replace(/{lat}/g,n.getLatitude().toString()).replace(/{radius}/g,a.toString())),e.gOSsPromise=fetch(i.replace(/{lon}/g,n.getLongitude().toString()).replace(/{lat}/g,n.getLatitude().toString()).replace(/{radius}/g,a.toString())),t.next=5,e.gOSsPromise;case 5:return t.next=7,t.sent.json();case 7:return o=t.sent,s=[],o.value.forEach((function(t){var n=t.Datastreams.flatMap((function(e){var t=d.a.getInstance().getFeature(e.ObservedProperty["@iot.id"]);return Object(p.isNullOrUndefined)(t)?[]:t})),a=new l.a(t["@iot.id"],t.name,t.description,new f.a(t.Locations[0].location.coordinates[1],t.Locations[0].location.coordinates[0]),n);s.push(a),e.stations[a.getId()]=a})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getStation",value:function(t){return e.stations[t]}}]),e}();v.stations={},v.gOSsPromise=void 0},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=n(6),i=n(28),o=function(){function e(t,n){Object(a.a)(this,e),this.linearTransition=void 0,this.dict=void 0,this.linearTransition=t,this.dict=n,this.sortOnKeys()}return Object(r.a)(e,[{key:"getColor",value:function(e){var t=Object.keys(this.dict);if(0===t.length)return i.a.getColorFromHex("#AAAAAA");for(var n=0;n<t.length-1;n++)if(Number(t[n])<=e&&Number(t[n+1])>e)return this.linearTransition?this.getLinearTransition(n,e):i.a.getColorFromHex(this.dict[Number(t[n])]);return i.a.getColorFromHex(this.dict[Number(t[t.length-1])])}},{key:"sortOnKeys",value:function(){for(var e=Object.keys(this.dict),t=[],n=0;n<e.length;n++)t.push(Number(e[n]));t.sort();for(var a={},r=0;r<e.length;r++)a[t[r]]=this.dict[t[r]];this.dict=a}},{key:"getLinearTransition",value:function(e,t){var n=[Number(Object.keys(this.dict)[e]),""];n[1]=this.dict[n[0]];var a=[Number(Object.keys(this.dict)[e+1]),""];a[1]=this.dict[a[0]];var r=i.a.getColorFromHex(n[1]).getRGB(),o=i.a.getColorFromHex(a[1]).getRGB(),s=this.interpolate([n[0],r.r],[a[0],o.r],t),u=this.interpolate([n[0],r.g],[a[0],o.g],t),c=this.interpolate([n[0],r.b],[a[0],o.b],t);return new i.a(s,u,c)}},{key:"interpolate",value:function(e,t,n){var a=t[0]-e[0];return e[1]*((a-n+e[0])/a)+t[1]*((a-t[0]+n)/a)}}]),e}()},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(5),r=n(6),i=n(67),o=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,[{key:"buildMapPin",value:function(e,t){return new i.a(e.getId(),e.getPosition(),t,this.getScale().getColor(t))}}]),e}()},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n){Object(a.a)(this,e),this.center=void 0,this.zoom=void 0,this.center=t,this.zoom=n,this.zoom<0&&(this.zoom=0)}return Object(r.a)(e,[{key:"getCenter",value:function(){return this.center}},{key:"getZoom",value:function(){return this.zoom}},{key:"getRadius",value:function(){return this.zoom}},{key:"setCenter",value:function(e){this.center=e}},{key:"setZoom",value:function(e){this.zoom=e,this.zoom<0&&(this.zoom=0)}}]),e}()},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a,r=n(5),i=n(6),o=n(32);!function(e){e.LINE_CHART="LineChart",e.PIE_CHART="PieChart"}(a||(a={}));var s=function(){function e(t){Object(r.a)(this,e),this.length=void 0,this.length=t}return Object(i.a)(e,[{key:"getEnd",value:function(e){return new Date(e.valueOf()+this.length)}},{key:"getStart",value:function(e){return new Date(e.valueOf()-this.length)}}]),e}(),u=n(44),c=function e(t,n,a,i){Object(r.a)(this,e),this.name=void 0,this.timespan=void 0,this.frequency=void 0,this.xAxis=void 0,this.name=t,this.timespan=n,this.frequency=a,this.xAxis=i},l=function(){function e(t,n){Object(r.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.yAxisLabel=void 0,this.observationStation=t,this.feature=n,this.yAxisLabel=this.feature.getName()+"["+this.feature.getUnitOfMeasurement()+"]"}return Object(i.a)(e,[{key:"getChartType",value:function(){return e.chartType}},{key:"getGraphicsOptions",value:function(){return e.graphicsOptions}},{key:"getViewOptions",value:function(){return e.graphicsOptions}},{key:"isConfigurable",value:function(){return e.isConfigutable}},{key:"getDefaultConfigurationOption",value:function(){return e.defaultConfigurationOption.name}},{key:"getConfigurationOptions",value:function(){return e.configurationOptions.map((function(e){return e.name}))}},{key:"getData",value:function(e){var t=this.getFHLCConfigurationOption(e),n=new Date(Date.now()),a=t.timespan.getStart(n),r=u.a.getObservations(this.observationStation,a,n,this.feature,t.frequency),i=[[t.xAxis,this.yAxisLabel]];return r.forEach((function(e){var t=e.getTimeStamp(),n=e.getValue();i.push([t,n])})),i}},{key:"getFHLCConfigurationOption",value:function(t){for(var n=e.configurationOptions,a=0;a<n.length;a++)if(n[a].name===t)return n[a];throw new Error("".concat(t," is an invalid configuration option for a diagram of type FeatureHistoryLineChart"))}}]),e}();l.chartType=a.LINE_CHART,l.isConfigutable=!0,l.configurationOptions=[new c("last_24_hours",new s(864e5),24,{type:"date",label:"Day"}),new c("last_7_days",new s(6048e5),12,{type:"date",label:"Day"}),new c("last_31_days",new s(26784e5),6,{type:"date",label:"Day"}),new c("last_year",new s(31536e6),1,{type:"date",label:"Day"})],l.defaultConfigurationOption=l.configurationOptions[0],l.graphicsOptions={};var f=function(){function e(t,n){Object(r.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.observationStation=t,this.feature=n}return Object(i.a)(e,[{key:"getChartType",value:function(){return e.chartType}},{key:"getGraphicsOptions",value:function(){return e.graphicsOptions}},{key:"isConfigurable",value:function(){return e.isConfigurable}},{key:"getConfigurationOptions",value:function(){return e.configurationOptions.map((function(e){return e.name}))}},{key:"getDefaultConfigurationOption",value:function(){return e.defaultConfigurationOption.name}},{key:"getData",value:function(e){var t,n=this.getCTLYPCConfigurationOption(e),a=new Date(Date.now()),r=n.timespan.getStart(a),i=u.a.getObservations(this.observationStation,r,a,this.feature,n.frequency),o=null===(t=i.pop())||void 0===t?void 0:t.getValue(),s=0,c=0;return i.forEach((function(e){e.getValue()>o?s++:c++})),[["Vergleich zum letzten Messwert","Anzahl Tage"],["higher",s],["lower",c]]}},{key:"getCTLYPCConfigurationOption",value:function(t){for(var n=e.configurationOptions,a=0;a<n.length;a++)if(n[a].name===t)return n[a];throw new Error("".concat(t," is an invalid configuration option for a diagram of type ComparisonToLastYearPieChart"))}}]),e}();f.chartType=a.PIE_CHART,f.isConfigurable=!1,f.graphicsOptions={},f.configurationOptions=[new function e(t,n,a){Object(r.a)(this,e),this.name=void 0,this.timespan=void 0,this.frequency=void 0,this.name=t,this.timespan=n,this.frequency=a}("default_configuration",new s(31536e6),24)],f.defaultConfigurationOption=f.configurationOptions[0];var g=n(122),h=function e(t,n,a){Object(r.a)(this,e),this.name=void 0,this.numberOfYears=void 0,this.frequency=void 0,this.name=t,this.numberOfYears=n,this.frequency=a},d=function(){function e(t,n){Object(r.a)(this,e),this.observationStation=void 0,this.feature=void 0,this.yAxisLabel=void 0,this.observationStation=t,this.feature=n,this.yAxisLabel="".concat(this.feature.getName()," [").concat(this.feature.getUnitOfMeasurement(),"]")}return Object(i.a)(e,[{key:"getChartType",value:function(){return e.chartType}},{key:"getGraphicsOptions",value:function(){return e.graphicsOptions}},{key:"isConfigurable",value:function(){return e.isConfigutable}},{key:"getDefaultConfigurationOption",value:function(){return e.defaultConfigurationOption.name}},{key:"getConfigurationOptions",value:function(){return e.configurationOptions.map((function(e){return e.name}))}},{key:"getYCLCCConfigurationOption",value:function(t){var n,a=Object(g.a)(e.configurationOptions);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.name===t)return r}}catch(i){a.e(i)}finally{a.f()}throw new Error("Configuration option: "+t+" does not exist for YearComparisonLineChart")}},{key:"getData",value:function(e){for(var t=this.getYCLCCConfigurationOption(e),n=t.numberOfYears,a=t.frequency,r=new Date(Date.now()),i=new Date(r.getFullYear()-n,0,1),o=r,s=u.a.getObservations(this.observationStation,i,o,this.feature,a).filter((function(e){return null!==e})),c=new Array,l=0;l<n;l++)c.push(r.getFullYear()-l);var f=c.map((function(e){return e.toString()}));f.splice(0,0,"dates");var h,d=new v(f),p=Object(g.a)(s);try{for(p.s();!(h=p.n()).done;){var m=h.value,b=m.getTimeStamp(),y=b.getFullYear().toString(),O=m.getValue();d.addValue(b,y,O)}}catch(w){p.e(w)}finally{p.f()}var k=d.toArray();return console.log(k),k}}]),e}();d.chartType=a.LINE_CHART,d.isConfigutable=!1,d.configurationOptions=[new h("default_configuration",3,1)],d.defaultConfigurationOption=new h("default_configuration",10,1),d.graphicsOptions={hAxis:{format:"MMM",gridlines:{count:6}}};var p=function(){function e(t,n){Object(r.a)(this,e),this.date=void 0,this.values=void 0,this.date=t,this.values=new Array(n)}return Object(i.a)(e,[{key:"addValue",value:function(e,t){this.values[t]=e}},{key:"toArray",value:function(){var e=new Array;return(e=this.values).splice(0,0,this.date),e}}],[{key:"sort",value:function(e,t){return e.date.valueOf()<=t.date.valueOf()?-1:1}}]),e}(),v=function(){function e(t){Object(r.a)(this,e),this.header=void 0,this.rows=void 0,this.numberOfValues=void 0,this.header=t,this.numberOfValues=t.length-1,this.rows=new Array}return Object(i.a)(e,[{key:"addValue",value:function(e,t,n){var a=this.getRowIndex(e);null===a&&(this.rows.push(new p(this.getBaseDate(e),this.numberOfValues)),a=this.rows.length-1);var r=this.getColumnIndex(t);if(null===t)throw new Error("No column key: ".concat(t," in this data table"));r=r,this.rows[a].addValue(n,r)}},{key:"getColumnIndex",value:function(e){for(var t=0;t<this.header.length;t++)if(e===this.header[t])return t-1;return null}},{key:"getRowIndex",value:function(e){for(var t=0;t<this.rows.length;t++)if(this.datesAreEqual(e,this.rows[t].date))return t;return null}},{key:"getBaseDate",value:function(t){return new Date(e.BASE_YEAR,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}},{key:"datesAreEqual",value:function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&e.getSeconds()===t.getSeconds()&&e.getMilliseconds()===t.getMilliseconds()}},{key:"sort",value:function(){this.rows.sort(p.sort)}},{key:"toArray",value:function(){this.sort();var e=new Array;return(e=this.rows.map((function(e){return e.toArray()}))).splice(0,0,this.header),e}}]),e}();v.BASE_YEAR=2020;var m=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"getDiagramController",value:function(t,n,a){if(e.diagramMap.has(t))return e.diagramMap.get(t).call(e,n,a);throw new Error("Diagram id: ".concat(t,", is not supported"))}}]),e}();m.diagramMap=new Map([["FeatureHistoryLineChart",function(e,t){return new l(e,t)}],["ComparisonToLastYearPieChart",function(e,t){return new f(e,t)}],["YearComparisonLineChart",function(e,t){return new d(e,t)}]]);var b=o.a.getInstance(),y=function(){function e(t,n,a,i,o,s,u,c,l){Object(r.a)(this,e),this.id=void 0,this.nameId=void 0,this.descriptionId=void 0,this.scale=void 0,this.relatedWeblinkId=void 0,this.limit=void 0,this.unitOfMeasurement=void 0,this.controllerIds=void 0,this.iconName=void 0,this.id=t,this.nameId=n,this.descriptionId=a,this.scale=i,this.relatedWeblinkId=o,this.limit=s,this.unitOfMeasurement=u,this.controllerIds=c,this.iconName=l}return Object(i.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return b.getText(this.nameId)}},{key:"getDescription",value:function(){return b.getText(this.descriptionId)}},{key:"getRelatedWeblink",value:function(){return b.getText(this.relatedWeblinkId)}},{key:"getRelatedScale",value:function(){return this.scale}},{key:"getDiagramController",value:function(e){var t=this,n=new Array;return this.controllerIds.forEach((function(a){var r=m.getDiagramController(a,e,t);n.push(r)})),n}},{key:"getLimit",value:function(){return this.limit}},{key:"getUnitOfMeasurement",value:function(){return this.unitOfMeasurement}},{key:"isLimitExceeded",value:function(e){return e.getValue()>this.limit}},{key:"getIconName",value:function(){return this.iconName}}]),e}()},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(6),i=function(){function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.position=void 0,this.value=void 0,this.color=void 0,this.id=t,this.position=n,this.value=r,this.color=i}return Object(r.a)(e,[{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}},{key:"getId",value:function(){return this.id}},{key:"getColor",value:function(){return this.color}}]),e}()},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=n(56),f=n(111),g=n(47),h=n(162),d=n.n(h),p=n(20),v=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.selectedFeature=e,a}return Object(s.a)(n,[{key:"getPins",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a,i,o,s,u,c=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.getLatestObservations(t.getCenter(),t.getRadius(),this.selectedFeature);case 2:for(n=e.sent,a={},i=[],o=0;o<n.length;o++)a[n[o].getObservationStation().getPosition().getString()]=n[o];return s=d.a.triangulate(i),u=[],s.forEach((function(e){var t=a[new p.a(e.p1.x,e.p1.y).getString()],n=a[new p.a(e.p2.x,e.p2.y).getString()],r=a[new p.a(e.p3.x,e.p3.y).getString()],i=(t.getValue()+n.getValue()+r.getValue())/3;u.push(new f.a([t.getObservationStation(),n.getObservationStation(),r.getObservationStation()],c.getScale().getColor(i)))})),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.selectedFeature.getRelatedScale()}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(l.a)},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=n(56),f=n(47),g=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this)).selectedFeature=void 0,a.selectedFeature=e,a}return Object(s.a)(n,[{key:"getPins",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.getLatestObservations(t.getCenter(),t.getZoom(),this.selectedFeature);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return a.buildMapPin(e.getObservationStation(),e.getValue())})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.selectedFeature.getRelatedScale()}},{key:"getFeatures",value:function(){return[this.selectedFeature]}}]),n}(l.a)},81:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(98),o=n(88),s=n(94),u=n(92),c=n(97),l=n(96),f=n(72),g=n(18),h=n(32);t.default=function(){var e=h.a.getInstance();return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(l.default,{language:e}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/pse-airquality-react/",component:i.default}),r.a.createElement(g.a,{exact:!0,path:"/pse-airquality-react/detail/:id",component:o.default}),r.a.createElement(g.a,{exact:!0,path:"/pse-airquality-react/about",component:u.default}),r.a.createElement(g.a,{exact:!0,path:"/pse-airquality-react/privacy-policy",component:c.default}),r.a.createElement(g.a,null,r.a.createElement(s.default,{code:404,message:h.a.getInstance().getText("Error404")})))))}},82:function(e,t,n){"use strict";n.r(t),n.d(t,"Map",(function(){return k}));var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=(n(146),n(0)),f=n.n(l),g=n(61),h=n(182),d=n(183),p=n(179),v=n(234),m=n(232),b=n(20),y=n(83),O=n(32);n(207);var k=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).nextViewport=void 0,a.lock=void 0,a.oldViewport=void 0,a.lock=!1,a.nextViewport=null,a.oldViewport=null,a.state={viewport:a.props.viewport,lastObservation:null},a}return Object(s.a)(n,[{key:"getIconFromMapPin",value:function(e){return L.IconMaterial.icon({icon:"",iconColor:"",markerColor:e.getColor().getHex(),outlineColor:"black",outlineWidth:1})}},{key:"onViewportChange",value:function(e){var t=this;this.nextViewport=e,this.lock||(this.oldViewport||(this.oldViewport=this.state.viewport),this.lock=!0,setTimeout((function(){var e,n,a=t.viewportLeafletToModel(t.nextViewport);t.lock=!1,t.oldViewport&&(a.getCenter().getDistance(null===(e=t.oldViewport)||void 0===e?void 0:e.getCenter())>.25||Math.abs(a.getZoom()-(null===(n=t.oldViewport)||void 0===n?void 0:n.getZoom()))>=1)&&t.updateViewport(a)}),500))}},{key:"updateViewport",value:function(e){this.props.onViewportChange(e),this.setState({viewport:e}),this.oldViewport=null}},{key:"viewportLeafletToModel",value:function(e){var t,n,a,r,i;return new g.a(new b.a(null!==(t=null===(n=e.center)||void 0===n?void 0:n[0])&&void 0!==t?t:0,null!==(a=null===(r=e.center)||void 0===r?void 0:r[1])&&void 0!==a?a:0),null!==(i=e.zoom)&&void 0!==i?i:5)}},{key:"handlePopup",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.handlePopup(t);case 2:n=e.sent,this.setState({lastObservation:n});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPositionsFromPolygon",value:function(e){return e.getStations().map((function(e){return e.getPosition().getCoordinates()}))}},{key:"render",value:function(){var e=this;return f.a.createElement("div",null,f.a.createElement(h.a,{center:this.state.viewport.getCenter().getCoordinates(),zoom:this.state.viewport.getZoom(),onViewportChange:function(t){return e.onViewportChange(t)}},f.a.createElement(d.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this.props.pins.map((function(t){return f.a.createElement(p.a,{position:t.getPosition().getCoordinates(),icon:e.getIconFromMapPin(t)},f.a.createElement(v.a,{onOpen:function(){return e.handlePopup(t)}},e.state.lastObservation?f.a.createElement(y.StationInfo,{lastObservation:e.state.lastObservation}):f.a.createElement("p",null,O.a.getInstance().getText("loading"))))})),this.props.polygons.map((function(t){return f.a.createElement(m.a,{positions:e.getPositionsFromPolygon(t),color:t.getColor().getHex()})}))))}}]),n}(f.a.Component)},83:function(e,t,n){"use strict";n.r(t),n.d(t,"StationInfo",(function(){return p}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(21),l=n(24),f=n(130),g=n(32),h=n(84),d=g.a.getInstance(),p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"openDetails",value:function(){window.location.href="detail/"+this.props.lastObservation.getObservationStation().getId()}},{key:"render",value:function(){var e=this,t=this.props.lastObservation.getObservationStation();return u.a.createElement(c.a,{alignContent:"center",direction:"column",spacing:5},u.a.createElement(l.a,{variant:"h4",color:"secondary"},t.getName()),u.a.createElement(l.a,{variant:"subtitle1",color:"textSecondary"},t.getPosition().getString()),u.a.createElement(l.a,{variant:"h6"},u.a.createElement(c.a,{container:!0,direction:"row",spacing:2},u.a.createElement(c.a,{item:!0,xs:!0},this.props.lastObservation.getFeature().getName()+":"),u.a.createElement(c.a,{item:!0,xs:!0},u.a.createElement(l.a,{variant:"h6",display:"inline",color:"primary"},Math.floor(100*this.props.lastObservation.getValue())/100," ",this.props.lastObservation.getFeature().getUnitOfMeasurement())))),u.a.createElement(h.default,{feature:this.props.lastObservation.getFeature()}),u.a.createElement(f.a,{onClick:function(){return e.openDetails()},variant:"contained",color:"primary",style:{minWidth:"300px"}},d.getText("stationInfoButton")))}}]),n}(u.a.Component)},84:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(73),r=n(0),i=n.n(r),o=n(127),s=n(139),u=n(233),c=n(24),l=n(140),f=n(136),g=n(130),h=n(160),d=n.n(h),p=n(32),v=Object(o.a)((function(e){return Object(s.a)({typography:{padding:e.spacing(2)},icon:{background:e.palette.primary.main,marginBottom:"10px"},box:{alignItems:"center",display:"flex",padding:"1px"}})})),m=p.a.getInstance();function b(e){var t,n,r,o,s=v(),h=i.a.useState(null),p=Object(a.a)(h,2),b=p[0],y=p[1],O=Boolean(b),k=O?"simple-popover":void 0;return i.a.createElement("div",null,i.a.createElement(l.a,{className:s.icon,"aria-describedby":k,onClick:function(e){y(e.currentTarget)},style:{visibility:e.feature?"visible":"hidden"}},i.a.createElement(d.a,null)),i.a.createElement(u.a,{id:k,open:O,anchorEl:b,onClose:function(){y(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},i.a.createElement(f.a,{className:s.box},i.a.createElement(c.a,{className:s.typography},null!==(t=null===(n=e.feature)||void 0===n?void 0:n.getDescription())&&void 0!==t?t:m.getText("error")),i.a.createElement(g.a,{color:"secondary",variant:"outlined",href:null!==(r=null===(o=e.feature)||void 0===o?void 0:o.getRelatedWeblink())&&void 0!==r?r:m.getText("error")},m.getText("RelatedLink")))))}},85:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var a=n(73),r=n(0),i=n.n(r),o=n(140),s=n(79),u=n(131),c=n(180),l=n(184),f=n(138),g=n(74),h=n(163),d=n.n(h),p=n(127),v=n(139),m=n(110),b=n(112),y=n(78),O=n(68),k=n(41),w=Object(p.a)((function(e){return Object(v.a)({root:{background:e.palette.primary.main},formControl:{margin:e.spacing(1),minWidth:120}})}));function C(e){var t,n=w(),h=Object(r.useState)(null),p=Object(a.a)(h,2),v=p[0],C=p[1],E=Object(r.useState)(k.a.getInstance().listAllFeatures()[0]),S=Object(a.a)(E,2),x=S[0],j=S[1],I=Object(r.useState)("StationConfiguration"),M=Object(a.a)(I,2),L=M[0],P=M[1];Object(r.useEffect)((function(){e.startConf&&(j(k.a.getInstance().getFeature(e.startConf.feature)),P(e.startConf.conf))}),[]);var D=function(t,n){switch(console.log(t),P(t),t){case"TestConfiguration":var a=new m.a(n);e.onConfigurationChange(a);break;case"NearConfiguration":var r=new b.a(n);e.onConfigurationChange(r);break;case"PolygonConfiguration":var i=new O.a(n);e.onConfigurationChange(i);break;case"StationConfiguration":var o=new y.a(n);e.onConfigurationChange(o)}};return i.a.createElement("div",null,i.a.createElement(o.a,{className:n.root,onClick:function(e){C(v?null:e.currentTarget)}},i.a.createElement(d.a,null)),v?i.a.createElement(s.a,{variant:"outlined"},i.a.createElement(u.a,null,i.a.createElement(c.a,{className:n.formControl},i.a.createElement(l.a,null,"Feature"),i.a.createElement(f.a,{onChange:function(e){var t=k.a.getInstance().getFeature(e.target.value);if(j(t),t){if(!L)throw new Error("No config selected");D(L,t)}},value:null!==(t=null===x||void 0===x?void 0:x.getId())&&void 0!==t?t:""},k.a.getInstance().listAllFeatures().map((function(e){return i.a.createElement(g.a,{value:e.getId()},e.getName())})))),i.a.createElement(c.a,{className:n.formControl},i.a.createElement(l.a,null,"Style"),i.a.createElement(f.a,{onChange:function(e){x&&D(e.target.value,x)},value:null!==L&&void 0!==L?L:""},i.a.createElement(g.a,{value:"PolygonConfiguration"},"PolygonConfiguration"),i.a.createElement(g.a,{value:"StationConfiguration"},"StationConfiguration"),i.a.createElement(g.a,{value:"NearConfiguration"},"NearConfiguration"))))):"")}},86:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(129),l=n(235),f=n(132),g=n(133),h=n(164),d=n.n(h),p=n(165),v=n.n(p),m=n(178),b=n(20),y=n(32).a.getInstance(),O=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={searchTerm:"",locationEnabled:!0},"geolocation"in navigator&&navigator.permissions.query({name:"geolocation"}).then((function(e){"denied"===e.state&&r.setState({locationEnabled:!1})})),r}return Object(r.a)(n,[{key:"locationClick",value:function(){var e=this;"geolocation"in navigator?(console.log("Available"),navigator.geolocation.getCurrentPosition((function(t){var n=new b.a(t.coords.latitude,t.coords.longitude);e.props.updatePosition(n),e.setState({locationEnabled:!0})}),(function(t){console.log("Location denied."),e.setState({locationEnabled:!1})}))):(console.log("Not Available"),this.setState({locationEnabled:!1}))}},{key:"render",value:function(){var e=this;return u.a.createElement(c.a,{className:this.props.classes.root},u.a.createElement(l.a,{type:"search",variant:"outlined",className:this.props.classes.input,label:y.getText("search"),onKeyPress:function(t){"Enter"===t.key&&e.props.onSearch(e.state.searchTerm)},onChange:function(t){e.setState({searchTerm:t.target.value})},value:this.state.searchTerm}),u.a.createElement(f.a,{onClick:function(){return e.locationClick()},className:this.props.classes.iconButton},u.a.createElement(d.a,null)),u.a.createElement(g.a,{orientation:"vertical",className:this.props.classes.divider}),u.a.createElement(f.a,{color:"primary",onClick:function(){return e.locationClick()},className:this.props.classes.iconButton,disabled:!this.state.locationEnabled},u.a.createElement(v.a,null)))}}]),n}(u.a.Component);t.default=Object(m.a)((function(e){return{root:{margin:"5px 5px",padding:"2px 4px",display:"flex",alignItems:"center",width:"100%",maxWidth:"500px"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}))(O)},87:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(136),o=n(21),s=n(24),u=n(127),c=n(139),l=Object(u.a)((function(e){return Object(c.a)({box:{padding:e.spacing(1),width:"50px",backgroundColor:"white"}})}));function f(e,t,n){for(var a="linear-gradient(0deg,",r=0;r<10;r++)a=a+e.getColor(t+r/10*(n-t)).getHex()+" "+10*r+"%, ";return{background:a=a.slice(0,-2)+")",height:"80px",width:"40px"}}t.default=function(e){var t=l();return r.a.createElement(i.a,{className:t.box,border:1},r.a.createElement(o.a,{container:!0,direction:"column"},r.a.createElement(s.a,{variant:"body2"},Math.floor(10*e.max)/10),r.a.createElement(i.a,{style:f(e.scale,e.min,e.max)}),r.a.createElement(s.a,{variant:"body2"},Math.floor(10*e.min)/10)))}},88:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(21),l=n(231),f=n(44),g=n(89),h=n(91),d=n(93),p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).observationStation=void 0,r.styles={main_container:{paddingTop:"20px"}},r.observationStation=f.a.getStation(r.props.id),r}return Object(r.a)(n,[{key:"renderDiagrams",value:function(){return this.observationStation.getDiagramController().map((function(e){return u.a.createElement(c.a,{item:!0,xl:6,lg:6,md:6,sm:6,xs:6},u.a.createElement(d.default,{controller:e}))}))}},{key:"render",value:function(){return u.a.createElement(c.a,{container:!0,justify:"center"},u.a.createElement(c.a,{container:!0,justify:"center",spacing:4,xl:8,lg:8,md:8,sm:12,xs:12,style:this.styles.main_container},u.a.createElement(c.a,{item:!0,xl:8,lg:8,md:8,sm:12,xs:12},u.a.createElement(g.default,{observationStation:this.observationStation})),u.a.createElement(l.a,{only:["sm","xs"]},u.a.createElement(c.a,{item:!0,xl:4,lg:4,md:4},u.a.createElement(h.default,{position:this.observationStation.getPosition()}))),this.renderDiagrams()))}}]),n}(u.a.Component)},89:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(21),l=n(79),f=n(131),g=n(24),h=n(133),d=n(90),p=n(44),v=n(28),m=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).observationStation=void 0,r.styles={pos:{marginBottom:12},section_1:{padding:"20px"},section_2:{padding:"20px"},feature_container:{marginTop:"20px"}},r.colors=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],r.observationStation=r.props.observationStation,r.state={latestObservations:r.getLatestObservations()},r}return Object(r.a)(n,[{key:"getLatestObservations",value:function(){var e=this,t=this.observationStation.getFeatures(),n=new Array;return t.forEach((function(t){var a=p.a.getLatestObservation(e.observationStation,t);n.push(a)})),n}},{key:"getRandomColor",value:function(){var e=Math.round(Math.random()*(this.colors.length-1)),t=this.colors[e];return this.colors.splice(e,1),v.a.getColorFromHex(t)}},{key:"renderLatestObservations",value:function(){var e=this;return this.state.latestObservations.map((function(t){return u.a.createElement(c.a,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12},u.a.createElement(d.default,{color:e.getRandomColor(),observation:t}))}))}},{key:"renderObservationDate",value:function(){if(0!==this.state.latestObservations.length){var e=this.state.latestObservations[0].getTimeStamp(),t=e.getFullYear(),n=e.getMonth(),a=e.getDay(),r=e.getHours(),i=e.getMinutes();return this.getDateString(t,n,a,r,i)}return""}},{key:"getDateString",value:function(e,t,n,a,r){var i=[e,t,n,a,r].map((function(e){return e.toString()}));return(i=i.map((function(e){return 1===e.length?"0"+e:e})))[2]+"."+i[1]+"."+i[0]+", "+i[3]+":"+i[4]+" Uhr"}},{key:"render",value:function(){return u.a.createElement(l.a,null,u.a.createElement(f.a,null,u.a.createElement("div",{style:this.styles.section_1},u.a.createElement(g.a,{align:"left",variant:"h4",component:"h2"},this.observationStation.getName()),u.a.createElement(g.a,{align:"left",color:"textSecondary",component:"p",style:this.styles.pos},this.observationStation.getPosition().getString()),u.a.createElement(g.a,{align:"left",variant:"body2",component:"p"},this.observationStation.getDescription())),u.a.createElement(h.a,{variant:"middle"}),u.a.createElement("div",{style:this.styles.section_2},u.a.createElement(c.a,{container:!0,alignItems:"stretch"},u.a.createElement(c.a,{item:!0,xs:!0},u.a.createElement(g.a,{align:"left",variant:"subtitle1"},"Letzte Messung")),u.a.createElement(c.a,{item:!0},u.a.createElement(g.a,{color:"textSecondary",variant:"subtitle1"},this.renderObservationDate()))),u.a.createElement(c.a,{container:!0,style:this.styles.feature_container,spacing:2},this.renderLatestObservations()))))}}]),n}(u.a.Component)},90:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(79),l=n(131),f=n(21),g=n(140),h=n(24),d=n(166),p=n(167),v=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).color=void 0,r.observation=void 0,r.feature=void 0,r.styles={feature_card:{},card_content:{padding:"10px"}},r.color=r.props.color,r.observation=r.props.observation,r.feature=r.observation.getFeature(),r}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(c.a,{style:this.styles.feature_card},u.a.createElement(l.a,{style:this.styles.card_content},u.a.createElement(f.a,{container:!0,alignItems:"center"},u.a.createElement(f.a,{item:!0,xl:2,lg:2,md:2,sm:2,xs:2},u.a.createElement(g.a,{style:{backgroundColor:this.color.getHex()}},u.a.createElement(d.a,{icon:p.a}))),u.a.createElement(f.a,{item:!0,xl:10,lg:10,md:10,sm:10,xs:10},u.a.createElement(h.a,{color:"textSecondary"},this.feature.getName()),u.a.createElement(h.a,{variant:"subtitle1"},this.observation.getValue()+" "+this.feature.getUnitOfMeasurement())))))}}]),n}(u.a.Component)},91:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=n(79),l=n(182),f=n(183),g=n(179),h=(n(217),n(23)),d=n.n(h),p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).position=void 0,r.styles={map:{height:"300px"}},r.position=new d.a.LatLng(r.props.position.getLatitude(),r.props.position.getLongitude()),r}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(c.a,null,u.a.createElement(l.a,{center:this.position,zoom:n.ZOOM_LEVEL,style:this.styles.map,scrollWheelZoom:!1,dragging:!1,keyboard:!1,doubleClickZoom:!1},u.a.createElement(f.a,{url:n.TILE_SERVER,attribution:n.TILE_SERVER_ATTRIBUTION}),u.a.createElement(g.a,{position:this.position,icon:n.MARKER_ICON})))}}]),n}(u.a.Component);p.ZOOM_LEVEL=20,p.TILE_SERVER="https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",p.TILE_SERVER_ATTRIBUTION='&copy; <a href="https://www..org/copyright">OpenStreetMap</a>',p.MARKER_ICON_PATH="./marker_icon.svg",p.MARKER_ICON_SIZE=48,p.MARKER_ICON=new d.a.Icon({iconUrl:n(218)(""+p.MARKER_ICON_PATH),iconSize:[p.MARKER_ICON_SIZE,p.MARKER_ICON_SIZE],iconAnchor:[p.MARKER_ICON_SIZE/2,p.MARKER_ICON_SIZE]})},92:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(s.Fragment,null,u.a.createElement("h1",null,"AboutPage"))}}]),n}(u.a.Component)},93:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var a=n(5),r=n(6),i=n(51),o=n(14),s=n(13),u=n(0),c=n.n(u),l=n(74),f=n(21),g=n(138),h=n(79),d=n(24),p=n(133),v=n(225),m=n(168),b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).controller=void 0,r.styles={header:{padding:"10px",paddingLeft:"40px"},diagram:{width:"100%",height:"350px"}},r.controller=r.props.controller,r.state={configurationOption:r.controller.getDefaultConfigurationOption()},r.handleConfigurationChange=r.handleConfigurationChange.bind(Object(i.a)(r)),r}return Object(r.a)(n,[{key:"handleConfigurationChange",value:function(e){this.setState({configurationOption:e.target.value})}},{key:"renderConfigurationOptions",value:function(){return this.controller.getConfigurationOptions().map((function(e){return c.a.createElement(l.a,{value:e},e)}))}},{key:"renderDiagramConfiguration",value:function(){return this.controller.isConfigurable()?c.a.createElement(f.a,{item:!0},c.a.createElement(g.a,{value:this.state.configurationOption,onChange:this.handleConfigurationChange},this.renderConfigurationOptions())):""}},{key:"render",value:function(){return c.a.createElement(h.a,null,c.a.createElement("div",{style:this.styles.header},c.a.createElement(f.a,{container:!0,justify:"space-between",alignItems:"center"},c.a.createElement(f.a,{item:!0},c.a.createElement(d.a,{variant:"subtitle1"},this.controller.feature.getName())),this.renderDiagramConfiguration())),c.a.createElement(p.a,null),c.a.createElement(m.a,{width:this.styles.diagram.width,height:this.styles.diagram.height,chartType:this.controller.getChartType(),options:this.controller.getGraphicsOptions(),loader:c.a.createElement(f.a,{container:!0,justify:"center",alignContent:"center",style:this.styles.diagram},c.a.createElement(v.a,null)),data:this.controller.getData(this.state.configurationOption)}))}}]),n}(c.a.Component)},94:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).code=void 0,r.message=void 0,r.code=r.props.code,r.message=r.props.message,r}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement(s.Fragment,null,u.a.createElement("h1",null,"Error"),u.a.createElement("h2",null,this.code),u.a.createElement("p",null,this.message))}}]),n}(u.a.Component)},95:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var a=n(5),r=n(6),i=n(51),o=n(14),s=n(13),u=n(0),c=n.n(u),l=n(74),f=n(130),g=n(126),h=n(226),d=n(227),p=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).availableLanguages=void 0,r.ref=void 0,r.language=void 0,r.language=e.language,r.state={selectedLang:r.language.getSelectedLanguage(),anchorEl:null},r.handleClick=r.handleClick.bind(Object(i.a)(r)),r.handleClose=r.handleClose.bind(Object(i.a)(r)),r.availableLanguages=r.language.getAvailabeleLanguages(),r}return Object(r.a)(n,[{key:"isSelectedLang",value:function(e){return!1}},{key:"handleClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"handleMenuItemClick",value:function(e,t){this.language.changeLanguage(t),window.location.reload(),this.setState({anchorEl:null,selectedLang:this.language.getSelectedLanguage()})}},{key:"langList",value:function(){var e=this,t=[];return this.availableLanguages.forEach((function(n,a){t.push(c.a.createElement(l.a,{onClick:function(t){return e.handleMenuItemClick(t,a)},selected:a===e.language.getSelectedLanguageId()},n))})),t}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(f.a,{onClick:this.handleClick,color:"inherit",startIcon:c.a.createElement(h.a,null),endIcon:c.a.createElement(d.a,null),"aria-controls":"simple-menu","aria-haspopup":"true"},this.state.selectedLang),c.a.createElement(g.a,{open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,onClose:this.handleClose},this.langList()))}}]),n}(c.a.Component)},96:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n(5),r=n(6),i=n(51),o=n(14),s=n(13),u=n(0),c=n.n(u),l=n(228),f=n(229),g=n(24),h=n(132),d=n(230),p=n(224),v=n(116),m=n(134),b=n(135),y=n(170),O=n.n(y),k=n(172),w=n.n(k),C=n(171),E=n.n(C),S=n(173),x=n.n(S),j=n(95),I=n(72),M=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).language=void 0,r.language=e.language,r.state={open:!1},r.toogleDrawer=r.toogleDrawer.bind(Object(i.a)(r)),r}return Object(r.a)(n,[{key:"toogleDrawer",value:function(){var e=!this.state.open;this.setState({open:e})}},{key:"render",value:function(){return c.a.createElement(u.Fragment,null,c.a.createElement(l.a,{position:"static"},c.a.createElement(f.a,null,c.a.createElement(g.a,{variant:"h6",component:I.b,to:"/pse-airquality-react/",style:{textDecoration:"none",color:"unset"}},"SmartAQnet"),c.a.createElement("div",{style:{marginLeft:"auto"}},c.a.createElement(j.default,{language:this.language})),c.a.createElement("div",null,c.a.createElement(h.a,{style:{float:"right"},onClick:this.toogleDrawer},c.a.createElement(O.a,null))))),c.a.createElement(d.a,{anchor:"right",open:this.state.open,onOpen:this.toogleDrawer,onClose:this.toogleDrawer},c.a.createElement("div",{style:{width:250}},c.a.createElement(p.a,null,c.a.createElement(v.a,{button:!0,onClick:this.toogleDrawer,component:I.b,to:"/pse-airquality-react/privacy-policy"},c.a.createElement(m.a,null,c.a.createElement(E.a,null)),c.a.createElement(b.a,{primary:this.language.getText("privacyPolicy")})),c.a.createElement(v.a,{button:!0,onClick:this.toogleDrawer,component:I.b,to:"/pse-airquality-react/about"},c.a.createElement(m.a,null,c.a.createElement(w.a,null)),c.a.createElement(b.a,{primary:this.language.getText("about")})),c.a.createElement(v.a,{button:!0,onClick:this.toogleDrawer,component:"a",href:"https://www.smartaq.net"},c.a.createElement(m.a,null,c.a.createElement(x.a,null)),c.a.createElement(b.a,{primary:"SmartAQnet"}))))))}}]),n}(c.a.Component)},97:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var a=n(5),r=n(6),i=n(14),o=n(13),s=n(0),u=n.n(s),c=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return u.a.createElement("h1",null,"Privacy Policy Page")}}]),n}(u.a.Component)},98:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),i=n(19),o=n(5),s=n(6),u=n(14),c=n(13),l=n(0),f=n.n(l),g=n(82),h=n(61),d=n(20),p=n(110),v=n(112),m=n(41),b=n(68),y=n(78),O=n(113),k=new y.a(m.a.getInstance().getFeature("saqn:op:ta")),w=new h.a(new d.a(49,8.4),7),C=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"save",value:function(e,t){localStorage.setItem("mapconf",JSON.stringify({type:e.constructor.name,feature:e.getFeatures()[0].getId(),view:t}))}},{key:"load",value:function(){var e=localStorage.getItem("mapconf");if(e&&JSON.parse(e)){var t=JSON.parse(e),n=new h.a(new d.a(t.view.center.latitude,t.view.center.longitude),t.view.zoom),a=m.a.getInstance().getFeature(t.feature);if(Object(O.isNullOrUndefined)(a))throw new Error("Feature "+t.feature+" is not supported.");return"NearConfiguration"===t.type?[new v.a(a),n]:"PolygonConfiguration"===t.type?[new b.a(a),n]:"StationConfiguration"===t.type?[new y.a(a),n]:[new p.a(a),n]}return[k,w]}}]),e}(),E=n(47),S=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object(o.a)(this,e),this.config=void 0,this.viewport=void 0,this.DEFAULT_POSITION=new d.a(49,8.4),this.DEFAULT_ZOOM=5,t){var n=C.load();this.config=n[0],this.viewport=n[1]}else this.viewport=new h.a(this.DEFAULT_POSITION,this.DEFAULT_ZOOM),this.config=new b.a(E.a.mockFeature());if(0===this.config.getFeatures().length)throw Error("Invalid MapConfiguration")}return Object(s.a)(e,[{key:"handlePopup",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.getStation(t.getId());case 2:return n=e.sent,e.abrupt("return",E.a.getLatestObservation(n,this.config.getFeatures()[0]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){C.save(this.config,this.viewport)}},{key:"getFeatureSelectConf",value:function(){var e=this.config.getFeatures()[0].getId();return{conf:this.config.constructor.name,feature:e}}},{key:"getViewport",value:function(){return this.viewport}},{key:"handleViewportChange",value:function(e){this.viewport=e,this.save()}},{key:"getPins",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.config.getPins(this.viewport));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPolygons",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.config.getPolygons(this.viewport));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getScale",value:function(){return this.config.getScale()}},{key:"changeFeature",value:function(e){}},{key:"onConfigurationChange",value:function(e){this.config=e,this.save()}},{key:"search",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://nominatim.openstreetmap.org/search?format=json&q="+encodeURIComponent(t));case 4:return n=e.sent,e.next=7,n.json();case 7:if(0!==(a=e.sent).length){e.next=10;break}return e.abrupt("return");case 10:this.updateCurrentPosition(new d.a(a[0].lat,a[0].lon));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentPosition",value:function(e){this.viewport.setCenter(e),console.log(e)}}]),e}(),x=n(85),j=n(86),I=n(87),M=n(136),L=n(178),P=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).mapController=void 0,a.mapController=new S,a.state={selectedStation:null,viewport:a.mapController.getViewport(),pins:[],polygons:[]},a.update(),a}return Object(s.a)(n,[{key:"changePopupStation",value:function(e){this.setState({selectedStation:e})}},{key:"update",value:function(){var e=this,t=this.mapController.getPins(),n=this.mapController.getPolygons();Promise.all([t,n]).then((function(t){e.setState({pins:t[0],polygons:t[1]})}))}},{key:"getValueAt",value:function(e,t){var n=this.state.pins.sort((function(t,n){return t.getPosition().getDistance(e)-n.getPosition().getDistance(e)})),a=0,r=0;0!==n.length&&(a=n[0].getPosition().getDistance(e));for(var i=0,o=0;o<=2;o++)if(n.length>o){var s=a/n[o].getPosition().getDistance(e);r+=s,i+=n[o].getValue()*s}return i/(0===r?1:r)}},{key:"onViewportChange",value:function(e){this.mapController.handleViewportChange(e),this.setState({viewport:e}),this.update()}},{key:"onStationSelected",value:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({selectedStation:null}),(n=this.mapController.handlePopup(t)).then((function(e){return a.changePopupStation(e.getObservationStation())})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(e){this.mapController.search(e),this.setState({selectedStation:this.state.selectedStation})}},{key:"getMin",value:function(){var e=Math.min.apply(Math,this.state.pins.map((function(e){return e.getValue()})));return isFinite(e)||(e=0),e}},{key:"getMax",value:function(){var e=Math.max.apply(Math,this.state.pins.map((function(e){return e.getValue()})));return isFinite(e)||(e=100),e}},{key:"render",value:function(){var e=this,t=this.getMin(),n=this.getMax();return f.a.createElement(M.a,null,f.a.createElement(j.default,{onSearch:function(t){return e.onSearch(t)},updatePosition:function(t){var n=e.state.viewport;n.setCenter(t),e.onViewportChange(n)}}),f.a.createElement(g.Map,{viewport:this.state.viewport,onViewportChange:function(t){e.onViewportChange(t)},handlePopup:function(t){return e.onStationSelected(t)},pins:this.state.pins,polygons:this.state.polygons}),f.a.createElement(x.default,{onConfigurationChange:function(t){e.mapController.onConfigurationChange(t),e.update()},startConf:this.mapController.getFeatureSelectConf()}),f.a.createElement(M.a,{zIndex:1e3,style:{position:"absolute",bottom:"7%",right:"5%"}},f.a.createElement(I.default,{min:t,max:n,scale:this.mapController.getScale()})))}}]),n}(f.a.Component);t.default=Object(L.a)((function(e){return{}}))(P)}},[[195,1,2]]]);
//# sourceMappingURL=main.b9306775.chunk.js.map